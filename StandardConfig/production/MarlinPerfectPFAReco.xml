<!-- 
  Reconstruction using Perfect particle flow settings from PandoraPFA.
  Use a REC file from standard ILD reconstruction as input to run this steering file.
  
  Mandatory parameters :
    * global.LCIOInputFiles : The input lcio input file(s)
    * constant.lcgeo_DIR : the lcgeo directory must point on the one sourced in your current ilcsoft
    * constant.DetectorModel : the detector model to use the pre-defined lcgeo_DIR as ${lcgeo_DIR}/ILD/compact/${DetectorModel}/${DetectorModel}.xml

  Author : Remi Ete, DESY
-->


<marlin>
  <constants>
    <!-- ***** Global constant for reconstruction ***** -->
    <!-- The ILDConfig directory where to look for the config -->
    <constant name="ILDConfig_DIR" value="." />
    <!-- The lcgeo directory where to look for the ILD model -->
    <constant name="lcgeo_DIR" value="/path/to/lcgeo_DIR" />
    <!-- ILD detector model -->
    <constant name="DetectorModel" value="None_Please_specify_one" />
    <!-- The full compact file name -->
    <constant name="CompactFile" value="${lcgeo_DIR}/ILD/compact/${DetectorModel}/${DetectorModel}.xml" />
    <!-- ILD calibration file -->
    <constant name="CalibrationFile" value="${ILDConfig_DIR}/Calibration/Calibration_${DetectorModel}.xml" />
    <!-- The center of mass energy (unit GeV). Mainly used for background overlay -->
    <constant name="CMSEnergy" value="Unknown" />
    
    <!-- ***** Input files constants ***** -->        
    <!-- Geometry model dependant calibration constants from external file -->
    <include ref="${ILDConfig_DIR}/${CalibrationFile}" />
    
    <!-- Output files constants -->
    <constant name="OutputBaseName" value="PerfectPFAReco" />
    <constant name="RECOutputFile" value="${OutputBaseName}_REC.slcio" />
    <constant name="PfoOutputFile" value="${OutputBaseName}_StandardPfoAnalysis.root" />
    <constant name="AIDAFileName" value="${OutputBaseName}_AIDA.root" />
    <constant name="PerfectPfoOutputFile" value="${OutputBaseName}_PerfectPfoAnalysis.root" />
  </constants>
  
  
  <!-- ***** Execute section ***** -->
  <execute>
    <!-- Initialization processors -->
    <processor name="MyAIDAProcessor" />
    <processor name="InitDD4hep" />
    
    <!-- Particle flow reconstruction -->
    <group name="ParticleFlow" />

    <!-- High level reconstruction -->
    <group name="HighLevelReco" />
    
    <!-- Output processors -->
    <processor name="MyLCIOOutputProcessor" />
    <group name="PfoAnalysis" />
  </execute>
  
  <!-- ***** Global section ***** -->
  <global>
    <parameter name="LCIOInputFiles"> </parameter>
    <parameter name="MaxRecordNumber" value="0"/>
    <parameter name="SkipNEvents" value="0"/>
    <parameter name="SupressCheck" value="false"/>
    <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> MESSAGE </parameter>
    <parameter name="RandomSeed" value="1234567890" />
    <parameter name="OutputSteeringFile" value="MarlinPerfectPFARecoParsed.xml"/>
  </global>
  
  <processor name="MyAIDAProcessor" type="AIDAProcessor">
    <!--Processor that handles AIDA files. Creates on directory per processor.  Processors only need to create and fill the histograms, clouds and tuples. Needs to be the first ActiveProcessor-->
    <!-- compression of output file 0: false >0: true (default) -->
    <parameter name="Compress" type="int" value="1"/>
    <!-- filename without extension-->
    <parameter name="FileName" type="string" value="${AIDAFileName}"/>
    <!-- type of output file xml (default) or root ( only OpenScientist)-->
    <parameter name="FileType" type="string" value="root "/>
  </processor>
  <processor name="InitDD4hep" type="InitializeDD4hep">
    <!--InitializeDD4hep reads a compact xml file and initializes the DD4hep::LCDD object-->
    <!--Name of the DD4hep compact xml file to load-->
    <parameter name="DD4hepXMLFile" type="string"> ${CompactFile} </parameter>
  </processor>
  
  
  <group name="ParticleFlow">

    <processor name="MyDDMarlinPandora" type="DDPandoraPFANewProcessor">
      <!--Track cut on distance from BarrelTracker inner r to id whether track can form pfo-->
      <parameter name="MaxBarrelTrackerInnerRDistance" type="float">105.0 </parameter>
      <parameter name="PandoraSettingsXmlFile" type="String"> PandoraSettings/PandoraSettingsPerfectPFA.xml </parameter>
      <parameter name="UseDD4hepField" type="bool">false</parameter>
      <!-- Collection names -->
      <parameter name="TrackCollections" type="StringVec">MarlinTrkTracks</parameter>
      <parameter name="ECalCaloHitCollections" type="StringVec">EcalBarrelCollectionRec EcalBarrelCollectionGapHits EcalEndcapsCollectionRec EcalEndcapsCollectionGapHits EcalEndcapRingCollectionRec</parameter>
      <parameter name="HCalCaloHitCollections" type="StringVec">HcalBarrelCollectionRec HcalEndcapsCollectionRec HcalEndcapRingCollectionRec</parameter>
      <parameter name="LCalCaloHitCollections" type="StringVec">LCAL</parameter>
      <parameter name="LHCalCaloHitCollections" type="StringVec">LHCAL</parameter>
      <parameter name="MuonCaloHitCollections" type="StringVec">MUON</parameter>
      <parameter name="MCParticleCollections" type="StringVec">MCParticle</parameter>
      <parameter name="RelCaloHitCollections" type="StringVec">EcalBarrelRelationsSimRec EcalEndcapsRelationsSimRec EcalEndcapRingRelationsSimRec HcalBarrelRelationsSimRec HcalEndcapsRelationsSimRec HcalEndcapRingRelationsSimRec RelationMuonHit RelationLHcalHit RelationLcalHit</parameter>
      <parameter name="RelTrackCollections" type="StringVec">MarlinTrkTracksMCTruthLink</parameter>
      <parameter name="KinkVertexCollections" type="StringVec">KinkVertices</parameter>
      <parameter name="ProngVertexCollections" type="StringVec">ProngVertices</parameter>
      <parameter name="SplitVertexCollections" type="StringVec">SplitVertices</parameter>
      <parameter name="V0VertexCollections" type="StringVec">V0Vertices</parameter>
      <parameter name="StartVertexCollectionName" type="string">PerfectPandoraPFANewStartVertices</parameter>
      <parameter name="StartVertexAlgorithmName" type="string">PerfectPandoraPFANew</parameter>
      <parameter name="ClusterCollectionName" type="String">PerfectPandoraClusters</parameter>
      <parameter name="PFOCollectionName" type="String">PerfectPandoraPFOs</parameter>
      <!-- Calibration constants -->
      <parameter name="ECalToMipCalibration">${PandoraEcalToMip}</parameter>
      <parameter name="HCalToMipCalibration">${PandoraHcalToMip}</parameter>
      <parameter name="MuonToMipCalibration">${PandoraMuonToMip}</parameter>
      <parameter name="ECalMipThreshold" type="float">0.5</parameter>
      <parameter name="HCalMipThreshold" type="float">0.3</parameter>
      <parameter name="ECalToEMGeVCalibration">${PandoraEcalToEMScale}</parameter>
      <parameter name="HCalToEMGeVCalibration">${PandoraHcalToEMScale}</parameter>
      <parameter name="ECalToHadGeVCalibrationBarrel">${PandoraEcalToHadBarrelScale}</parameter>
      <parameter name="ECalToHadGeVCalibrationEndCap">${PandoraEcalToHadEndcapScale}</parameter>
      <parameter name="HCalToHadGeVCalibration">${PandoraHcalToHadScale}</parameter>
      <parameter name="DigitalMuonHits" type="int">0</parameter>
      <parameter name="MaxHCalHitHadronicEnergy" type="float">1000000.</parameter> 
      <parameter name="SoftwareCompensationWeights" type="FloatVec"> ${PandoraSoftwareCompensationWeights} </parameter>
      <parameter name="SoftwareCompensationEnergyDensityBins" type="FloatVec">0  2  5  7.5  9.5  13  16  20  23.5  28</parameter>
      <parameter name="FinalEnergyDensityBin" type="float">30</parameter>
      <parameter name="MaxClusterEnergyToApplySoftComp" type="float">1000</parameter>
      <parameter name="MinCleanHitEnergy" type="float">0.5</parameter>
      <parameter name="MinCleanHitEnergyFraction" type="float">0.01</parameter>
      <parameter name="MinCleanCorrectedHitEnergy" type="float">0.1</parameter>

      <!--Whether to calculate track states manually, rather than copy stored fitter values-->
      <parameter name="UseOldTrackStateCalculation" type="int"> 0 1  </parameter> <!-- !!!FIXME, workaround for some missing TS AtCalo face - this should really be: 0 -->
      <parameter name="NEventsToSkip" type="int">0</parameter>
      <!--parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> DEBUG0 </parameter-->
      <!--The name of the Vertex Barrel detector-->
      <parameter name="VertexBarrelDetectorName" type="string">VXD </parameter>
      <!--Detector names of the Trackers in the Barrel starting from the innermost one-->
      <parameter name="TrackerBarrelDetectorNames" type="StringVec">TPC</parameter>
      <!--Detector names of the Trackers in the Endcap starting from the innermost one-->
      <parameter name="TrackerEndcapDetectorNames" type="StringVec">FTD</parameter>
      <parameter name="CoilName" type="string">Coil</parameter>
      <parameter name="ECalBarrelDetectorName" type="string">EcalBarrel </parameter>
      <parameter name="ECalEndcapDetectorName" type="string">EcalEndcap </parameter>
      <parameter name="ECalOtherDetectorNames" type="StringVec">EcalPlug Lcal BeamCal  </parameter>
      <parameter name="HCalEndcapDetectorName" type="string">HcalEndcap </parameter>
      <parameter name="HCalBarrelDetectorName" type="string">HcalBarrel </parameter>
      <parameter name="HCalOtherDetectorNames" type="StringVec">HcalRing LHcal </parameter>
      <parameter name="MuonBarrelDetectorName" type="string">YokeBarrel </parameter>
      <parameter name="MuonEndcapDetectorName" type="string">YokeEndcap </parameter>
      <parameter name="MuonOtherDetectorNames" type="StringVec"></parameter>
      <!--Decides whether to create gaps in the geometry (ILD-specific)-->
      <!---SHOULD BE TRUE FOR ILD BUT INNER/OUTER SYMMETRIES ARE NOT COMPATIBLE -->
      <parameter name="CreateGaps" type="bool">false</parameter>
      <!--The name of the DDTrackCreator implementation-->
      <parameter name="TrackCreatorName" type="string">DDTrackCreatorILD </parameter>
      <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> SILENT </parameter>
    </processor>

  </group>
  
  <group name="HighLevelReco">
    <!--########## Add4MomCovMatrixCharged ###################################### -->
    <!--Set the convariance matrix in (P,E) for all charged pfos in PandoraPFOs Collection-->
    <processor name="MyAdd4MomCovMatrixCharged" type="Add4MomCovMatrixCharged">
      <!--Name of the PandoraPFOs collection-->
      <parameter name="InputPandoraPFOsCollection" type="String">PerfectPandoraPFOs</parameter>
      <!--Verbosity lower than MESSAGE4 will print out cov. matrix for each pfo-->
      <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> MESSAGE4 </parameter>
    </processor>

    <!--########## AddClusterProperties ###################################### -->
    <processor name="MyAddClusterProperties" type="AddClusterProperties">
      <parameter name="PFOCollectionName" type="string" lcioInType="ReconstructedParticle">PerfectPandoraPFOs </parameter>
      <parameter name="ClusterCollection" type="string" lcioInType="Cluster">PerfectPandoraClusters </parameter>
      <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
      <parameter name="Verbosity" type="string">MESSAGE </parameter>
    </processor>
    
    <processor name="MyComputeShowerShapesProcessor" type="ComputeShowerShapesProcessor">
      <!--Performs Shower profile extraction-->
      <!--Debugging?-->
      <parameter name="Debug" type="int">0 </parameter>
      <!--Name of the PFO collection-->
      <parameter name="PFOCollection" type="string"> PerfectPandoraPFOs </parameter>
      <!--Name of the Cluster collection-->
      <parameter name="ClusterCollectionName" type="string"> PerfectPandoraClusters </parameter>
      <!-- Radiation Length of Ecal-->
      <parameter name="RadiationLength_Ecal" type="float">3.50 </parameter>
      <!-- Radiation Length of Hcal-->
      <parameter name="RadiationLength_Hcal" type="float">17.57 </parameter>
      <!-- Moliere radius of Ecal-->
      <parameter name="MoliereRadius_Ecal" type="float">9.00 </parameter>
      <!-- Moliere radius of Hcal-->
      <parameter name="MoliereRadius_Hcal" type="float">17.19 </parameter>
    </processor>
    
    <processor name="MyRecoMCTruthLinker" type="RecoMCTruthLinker">
      <!--links RecontructedParticles to the MCParticle based on number of hits used-->
      <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
      <!-- <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> WARNING0  </parameter>  -->
      <!--  Input collections: mcparticles, pfos, clusters and tracks 
            PFOs already connect to tracks and clusters, so what we do in this processor is to connect
            tracks and clusters to mcparticles ... 
            The values given here are the defaults, so they don't really need to be
            specified -->
      <parameter name="MCParticleCollection" type="string" lcioInType="MCParticle"> MCParticle </parameter>
      <!--Name of the ReconstructedParticles input collection-->
      <parameter name="RecoParticleCollection" type="string" lcioInType="ReconstructedParticle"> PerfectPandoraPFOs </parameter>
      <!--Name of the Cluster collection -->
      <parameter name="ClusterCollection" type="string" lcioInType="Cluster"> PerfectPandoraClusters </parameter>
      <!--Name of the Tracks input collection-->
      <parameter name="TrackCollection" type="string" lcioInType="Track">MarlinTrkTracks </parameter>
      
      <!-- Don't change any of these hit related collections if you're not very sure you know what you are doing.
           In any case, the ones listed here are the defaults, so they can be removed from
           this steering -->
      <!--  Simulated tracker hits (has the conection to MCParticles -->
      <parameter name="SimTrackerHitCollections" type="StringVec" lcioInType="SimTrackerHit">
        VXDCollection 
        SITCollection 
        FTD_PIXELCollection 
        FTD_STRIPCollection 
        TPCCollection 
        SETCollection  
      </parameter>
      <!--  Connections from tracker hits (connected to tracks) to sim tracker hits (connects to MC particle) -->
      <parameter name="TrackerHitsRelInputCollections" type="StringVec" lcioInType="LCRelation">
        VXDTrackerHitRelations 
        SITTrackerHitRelations
        FTDPixelTrackerHitRelations 
        FTDSpacePointRelations 
        TPCTrackerHitRelations 
        SETSpacePointRelations  
      </parameter>
      <!-- same for the calos: Simulated calo hits (has the connection to MCParticles) -->
      <parameter name="SimCaloHitCollections" type="StringVec" lcioInType="SimCalorimeterHit">
        BeamCalCollection
        LHCalCollection
        LumiCalCollection
        ${ECalSimHitCollections}
        ${HCalSimHitCollections}
        YokeBarrelCollection
        YokeEndcapsCollection
      </parameter> 
      <!-- Connections from calo hist (connected to clusters) tp sim calo hits  (connects to MC particle) -->
      <parameter name="SimCalorimeterHitRelationNames" type="StringVec" lcioInType="LCRelation">
        EcalBarrelRelationsSimRec
        EcalEndcapRingRelationsSimRec
        EcalEndcapsRelationsSimRec
        HcalBarrelRelationsSimRec
        HcalEndcapRingRelationsSimRec
        HcalEndcapsRelationsSimRec
        RelationLHcalHit
        RelationMuonHit
        RelationLcalHit
        RelationBCalHit
      </parameter> 
      
      <!--PDG codes of particles of which the daughters will be kept in the skimmmed MCParticle collection-->
      <parameter name="KeepDaughtersPDG" type="IntVec"> 22 111 310 13 211 321</parameter>
      
      <!--Names of the output collections -->
      <!--Name of the skimmed MCParticle  output collection-->
      <parameter name="MCParticlesSkimmedName" type="string" lcioOutType="MCParticle"> PerfectMCParticlesSkimmed </parameter>
      
      <!-- links between tracks or clusters and mcparticles. The two sets differ
           in what the weight means. These four will only be output if the
           name is given here in the steering -->
      <parameter name="MCTruthTrackLinkName" type="string" lcioOutType="LCRelation"> PerfectMCTruthMarlinTrkTracksLink </parameter>  
      <parameter name="TrackMCTruthLinkName" type="string" lcioOutType="LCRelation"> PerfectMarlinTrkTracksMCTruthLink </parameter>
      <parameter name="MCTruthClusterLinkName" type="string" lcioOutType="LCRelation"> PerfectMCTruthClusterLink </parameter>
      <parameter name="ClusterMCTruthLinkName" type="string" lcioOutType="LCRelation"> PerfectClusterMCTruthLink </parameter>


      <!-- Links PFO <-> MCParticles. Only RecoMCTruthLink is output by default,
           to also get the reverse link, MCTruthRecoLinkName must be given here -->
      <parameter name="RecoMCTruthLinkName" type="string" lcioOutType="LCRelation"> PerfectRecoMCTruthLink </parameter>
      <parameter name="MCTruthRecoLinkName" type="string" lcioOutType="LCRelation"> PerfectMCTruthRecoLink </parameter>
      <!-- set to true to get the weights in RecoMCTruthLink to include both weights to
           tracks and clusters. False implies that only the true particle that
           gives most contributions to the track of the PFO (charged PFOs), or
           to the cluster (neutral ones) is linked to the PFO -->
      <parameter name="FullRecoRelation" type="bool"> true </parameter>
      <!-- further options -->
      <!--true: use relations for TrackerHits, false : use getRawHits -->
      <parameter name="UseTrackerHitRelations" type="bool"> true </parameter>
      <!--If Using Particle Gun Ignore Gen Stat-->
      <parameter name="UsingParticleGun" type="bool"> false </parameter>
      <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
      <parameter name="Verbosity" type="string">MESSAGE </parameter>
    </processor>
  </group>
  
  <!-- Write reconstruction output -->
  <processor name="MyLCIOOutputProcessor" type="LCIOOutputProcessor">
    <!--   standard output: full reconstruction keep all collections -->
    <parameter name="LCIOOutputFile" type="string" > ${RECOutputFile} </parameter>
    <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
  </processor>

  <group name="PfoAnalysis">
    <!--PfoAnalysis analyses output of PandoraPFANew-->
    <!--Names of mc particle collection-->
    <parameter name="MCParticleCollection" type="string" lcioInType="MCParticle">MCParticle </parameter>
    <!--Flag to look for quarks with mother Z-->
    <parameter name="LookForQuarksWithMotherZ" type="int">0 </parameter>
    <!--MC pfo selection radius-->
    <parameter name="MCPfoSelectionRadius" type="float">500. </parameter>
    <!--MC pfo selection momentum-->
    <parameter name="MCPfoSelectionMomentum" type="float">0.01 </parameter>
    <!--MC pfo selection neutron and proton low energy cut-off-->
    <parameter name="MCPfoSelectionLowEnergyNPCutOff" type="float">1.2 </parameter>
    <!--Set the debug print level-->
    <parameter name="Printing" type="int">0 </parameter>
    
    <!--Name of the ECal collection of calo hits used to form clusters-->
    <parameter name="ECalCollections" type="StringVec" lcioInType="CalorimeterHit">EcalBarrelCollectionRec EcalBarrelCollectionGapHits EcalEndcapsCollectionRec EcalEndcapsCollectionGapHits EcalEndcapRingCollectionRec</parameter>
    <!--Name of the HCAL collection used to form clusters-->
    <parameter name="HCalCollections" type="StringVec" lcioInType="CalorimeterHit">HcalBarrelCollectionRec HcalEndcapsCollectionRec HcalEndcapRingCollectionRec </parameter>
    <!--Name of the MUON collection used to form clusters-->
    <parameter name="MuonCollections" type="StringVec" lcioInType="CalorimeterHit">MUON </parameter>
    <!--Name of the BCAL collection used to form clusters-->
    <parameter name="BCalCollections" type="StringVec" lcioInType="CalorimeterHit">BCAL</parameter>
    <!--Name of the LHCAL collection used to form clusters-->
    <parameter name="LHCalCollections" type="StringVec" lcioInType="CalorimeterHit">LHCAL</parameter>
    <!--Name of the LCAL collection used to form clusters-->
    <parameter name="LCalCollections" type="StringVec" lcioInType="CalorimeterHit">LCAL</parameter>

    <!--Whether to collect calibration details-->
    <parameter name="CollectCalibrationDetails" type="int"> 0 </parameter>
    <!--Name of the ECal collection post ddsim, pre digitisation-->
    <parameter name="ECalCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">${ECalSimHitCollections}</parameter>
    <!--Name of the HCal Barrel collection post ddsim, pre digitisation-->
    <parameter name="HCalBarrelCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">${HCalBarrelSimHitCollections}</parameter>
    <!--Name of the HCal EndCap collection post ddsim, pre digitisation-->
    <parameter name="HCalEndCapCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">${HCalEndcapSimHitCollections}</parameter>
    <!--Name of the HCAL Other collection used to form clusters-->
    <parameter name="HCalOtherCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">${HCalRingSimHitCollections}</parameter>
    <!--Name of the ECal Barrel collection post ddsim, pre digitisation-->
    <parameter name="ECalBarrelCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">${ECalBarrelSimHitCollections}</parameter>
    <!--Name of the ECAL EndCap collection post ddsim, pre digitisation-->
    <parameter name="ECalEndCapCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">${ECalEndcapSimHitCollections}</parameter>
    <!--Name of the ECAL Other collection post ddsim, pre digitisation-->
    <parameter name="ECalOtherCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">${ECalRingSimHitCollections}</parameter>
    <!--Name of the Muon collection post ddsim, pre digitisation-->
    <parameter name="MuonCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">YokeBarrelCollection YokeEndcapsCollection</parameter>
    <!--Name of the BeamCal collection post ddsim, pre digitisation-->
    <parameter name="BCalCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">BeamCalCollection</parameter>
    <!--Name of the LHCal collection post ddsim, pre digitisation-->
    <parameter name="LHCalCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">LHCalCollection</parameter>
    <!--Name of the LCal collection post ddsim, pre digitisation-->
    <parameter name="LCalCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">LumiCalCollection</parameter>
    
    <processor name="MyPfoAnalysis" type="PfoAnalysis">
      <!--Names of input pfo collection-->
      <parameter name="PfoCollection" type="string" lcioInType="ReconstructedParticle">PandoraPFOs </parameter>
      <!--Name of the output root file-->
      <parameter name="RootFile" type="string"> ${PfoOutputFile} </parameter>
      <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
      <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
    </processor>
    
    <processor name="MyPerfectPfoAnalysis" type="PfoAnalysis">
      <!--Names of input pfo collection-->
      <parameter name="PfoCollection" type="string" lcioInType="ReconstructedParticle">PerfectPandoraPFOs </parameter>
      <!--Name of the output root file-->
      <parameter name="RootFile" type="string"> ${PerfectPfoOutputFile} </parameter>
      <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
      <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
    </processor>
  </group>
  
</marlin>
