

<group name="EcalDigi">

  <!--### the Ecal barrel ###-->
  <!--digitisation -->
  <processor name="MyEcalBarrelDigiEven" type="RealisticCaloDigiSilicon">
    <parameter name="inputHitCollections"> ECalBarrelSiHitsEven </parameter>
    <parameter name="outputHitCollections"> ECalBarrelSiHitsEvenDigi </parameter>
    <parameter name="outputRelationCollections"> ECalBarrelSiHitsEvenDigiRelations </parameter>
    <parameter name="threshold"> 0.5 </parameter>
    <parameter name="thresholdUnit"> MIP </parameter>
    <parameter name="timingCut"> 1  </parameter>
    <parameter name="calibration_mip">${EcalBarrelMip}</parameter>
    <parameter name="ppd_mipPe"> 15 </parameter>
    <parameter name="ppd_npix"> 2000 </parameter>
    <parameter name="ppd_npix_uncert"> 0 </parameter>
    <parameter name="ppd_pix_spread"> 0 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  </processor>
  <processor name="MyEcalBarrelDigiOdd" type="RealisticCaloDigiSilicon">
    <parameter name="inputHitCollections"> ECalBarrelSiHitsOdd </parameter>
    <parameter name="outputHitCollections"> ECalBarrelSiHitsOddDigi </parameter>
    <parameter name="outputRelationCollections"> ECalBarrelSiHitsOddDigiRelations </parameter>
    <parameter name="threshold"> 0.5 </parameter>
    <parameter name="thresholdUnit"> MIP </parameter>
    <parameter name="timingCut"> 1  </parameter>
    <parameter name="calibration_mip">${EcalBarrelMip}</parameter>
    <parameter name="ppd_mipPe"> 15 </parameter>
    <parameter name="ppd_npix"> 2000 </parameter>
    <parameter name="ppd_npix_uncert"> 0 </parameter>
    <parameter name="ppd_pix_spread"> 0 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  </processor>
  <!-- reconstruction -->
  <processor name="MyEcalBarrelRecoEven" type="RealisticCaloRecoSilicon">
    <parameter name="inputHitCollections"> ECalBarrelSiHitsEvenDigi </parameter>
    <parameter name="inputRelationCollections"> ECalBarrelSiHitsEvenDigiRelations </parameter>
    <parameter name="outputHitCollections"> ECalBarrelSiHitsEvenRec </parameter>
    <parameter name="outputRelationCollections"> ECalBarrelSiHitsEvenRecRelations </parameter>
    <parameter name="calibration_layergroups"> 20 11 </parameter>
    <parameter name="calibration_factorsMipGev">${EcalBarrelEnergyFactors}</parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  </processor>
  <processor name="MyEcalBarrelRecoOdd" type="RealisticCaloRecoSilicon">
    <parameter name="inputHitCollections"> ECalBarrelSiHitsOddDigi </parameter>
    <parameter name="inputRelationCollections"> ECalBarrelSiHitsOddDigiRelations </parameter>
    <parameter name="outputHitCollections"> ECalBarrelSiHitsOddRec </parameter>
    <parameter name="outputRelationCollections"> ECalBarrelSiHitsOddRecRelations </parameter>
    <parameter name="calibration_layergroups"> 20 11 </parameter>
    <parameter name="calibration_factorsMipGev">${EcalBarrelEnergyFactors}</parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  </processor>
  <!--### the Ecal endcaps ###-->
  <!-- digitisation -->
  <processor name="MyEcalEndcapDigiEven" type="RealisticCaloDigiSilicon">
    <parameter name="inputHitCollections"> ECalEndcapSiHitsEven </parameter>
    <parameter name="outputHitCollections"> ECalEndcapSiHitsEvenDigi </parameter>
    <parameter name="outputRelationCollections"> ECalEndcapSiHitsEvenDigiRelations </parameter>
    <parameter name="threshold"> 0.5 </parameter>
    <parameter name="thresholdUnit"> MIP </parameter>
    <parameter name="timingCut"> 1  </parameter>
    <parameter name="calibration_mip">${EcalEndcapMip}</parameter>
    <parameter name="ppd_mipPe"> 15 </parameter>
    <parameter name="ppd_npix"> 2000 </parameter>
    <parameter name="ppd_npix_uncert"> 0 </parameter>
    <parameter name="ppd_pix_spread"> 0 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  </processor>
  <processor name="MyEcalEndcapDigiOdd" type="RealisticCaloDigiSilicon">
    <parameter name="inputHitCollections"> ECalEndcapSiHitsOdd </parameter>
    <parameter name="outputHitCollections"> ECalEndcapSiHitsOddDigi </parameter>
    <parameter name="outputRelationCollections"> ECalEndcapSiHitsOddDigiRelations </parameter>
    <parameter name="threshold"> 0.5 </parameter>
    <parameter name="thresholdUnit"> MIP </parameter>
    <parameter name="timingCut"> 1  </parameter>
    <parameter name="calibration_mip">${EcalEndcapMip}</parameter>
    <parameter name="ppd_mipPe"> 15 </parameter>
    <parameter name="ppd_npix"> 2000 </parameter>
    <parameter name="ppd_npix_uncert"> 0 </parameter>
    <parameter name="ppd_pix_spread"> 0 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  </processor>
  <!-- reconstruction -->
  <processor name="MyEcalEndcapRecoEven" type="RealisticCaloRecoSilicon">
    <parameter name="inputHitCollections"> ECalEndcapSiHitsEvenDigi </parameter>
    <parameter name="inputRelationCollections"> ECalEndcapSiHitsEvenDigiRelations </parameter>
    <parameter name="outputHitCollections"> ECalEndcapSiHitsEvenRec </parameter>
    <parameter name="outputRelationCollections"> ECalEndcapSiHitsEvenRecRelations </parameter>
    <parameter name="ppd_mipPe"> 15 </parameter> 
    <parameter name="ppd_npix"> 2000 </parameter> 
    <parameter name="calibration_layergroups"> 20 11 </parameter>
    <parameter name="calibration_factorsMipGev">${EcalEndcapEnergyFactors}</parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  </processor>
  <processor name="MyEcalEndcapRecoOdd" type="RealisticCaloRecoSilicon">
    <parameter name="inputHitCollections"> ECalEndcapSiHitsOddDigi </parameter>
    <parameter name="inputRelationCollections"> ECalEndcapSiHitsOddDigiRelations </parameter>
    <parameter name="outputHitCollections"> ECalEndcapSiHitsOddRec </parameter>
    <parameter name="outputRelationCollections"> ECalEndcapSiHitsOddRecRelations </parameter>
    <parameter name="ppd_mipPe"> 15 </parameter> 
    <parameter name="ppd_npix"> 2000 </parameter> 
    <parameter name="calibration_layergroups"> 20 11 </parameter>
    <parameter name="calibration_factorsMipGev">${EcalEndcapEnergyFactors}</parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  </processor>
  <!--### the Ecal endcap rings ###-->
  <!-- digitisation -->
  <processor name="MyEcalRingDigi" type="RealisticCaloDigiSilicon">
    <parameter name="inputHitCollections"> EcalEndcapRingCollection </parameter>
    <parameter name="outputHitCollections"> EcalEndcapRingCollectionDigi </parameter>
    <parameter name="outputRelationCollections"> EcalEndcapRingRelationsSimDigi </parameter>
    <parameter name="threshold"> 0.5 </parameter>
    <parameter name="timingCut"> 1  </parameter>
    <parameter name="calibration_mip">${EcalRingMip}</parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  </processor>
  <!-- reconstruction -->
  <processor name="MyEcalRingReco" type="RealisticCaloRecoSilicon">
    <parameter name="inputHitCollections"> EcalEndcapRingCollectionDigi </parameter>
    <parameter name="inputRelationCollections"> EcalEndcapRingRelationsSimDigi </parameter>
    <parameter name="outputHitCollections"> EcalEndcapRingCollectionRec </parameter>
    <parameter name="outputRelationCollections"> EcalEndcapRingRelationsSimRec </parameter>
    <parameter name="calibration_layergroups"> 20 11 </parameter>
    <parameter name="calibration_factorsMipGev">${EcalRingEnergyFactors}</parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  </processor>
  
  <processor name="MyDDStripSplitter" type="DDStripSplitter">
    <parameter name="ECALcollections_oddLayers"> ECalBarrelSiHitsOddRec ECalEndcapSiHitsOddRec </parameter>
    <parameter name="ECALcollections_evenLayers"> ECalBarrelSiHitsEvenRec ECalEndcapSiHitsEvenRec </parameter>
    <parameter name="saveIntersectionCollection"> false </parameter>
    <parameter name="saveCheckRootHistograms"> false </parameter>
  </processor>
  
  <!-- Merge even and odd collections -->
  <processor name="MergeEcalBarrelHits" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec"> ECalBarrelSiHitsEven ECalBarrelSiHitsOdd </parameter>
    <parameter name="OutputCollection" type="string"> EcalBarrelCollection </parameter>
  </processor>
  <processor name="MergeEcalEndcapHits" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec"> ECalEndcapSiHitsEven ECalEndcapSiHitsOdd </parameter>
    <parameter name="OutputCollection" type="string"> EcalEndcapsCollection </parameter>
  </processor>
  <processor name="MergeEcalBarrelDigiHits" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec"> ECalBarrelSiHitsEvenDigi ECalBarrelSiHitsOddDigi </parameter>
    <parameter name="OutputCollection" type="string"> EcalBarrelCollectionDigi </parameter>
  </processor>
  <processor name="MergeEcalEndcapDigiHits" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec"> ECalEndcapSiHitsEvenDigi ECalEndcapSiHitsOddDigi </parameter>
    <parameter name="OutputCollection" type="string"> EcalEndcapsCollectionDigi </parameter>
  </processor>
  <processor name="MergeEcalBarrelRecHits" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec"> ECalBarrelSiHitsEvenRec ECalBarrelSiHitsOddRec </parameter>
    <parameter name="OutputCollection" type="string"> EcalBarrelCollectionRec </parameter>
  </processor>
  <processor name="MergeEcalEndcapRecHits" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec"> ECalEndcapSiHitsEvenRec ECalEndcapSiHitsOddRec </parameter>
    <parameter name="OutputCollection" type="string"> EcalEndcapsCollectionRec </parameter>
  </processor>
  <processor name="MergeEcalBarrelRelDigiHits" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec"> ECalBarrelSiHitsEvenDigiRelations ECalBarrelSiHitsOddDigiRelations </parameter>
    <parameter name="OutputCollection" type="string"> EcalBarrelRelationsSimDigi </parameter>
  </processor>
  <processor name="MergeEcalEndcapRelDigiHits" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec"> ECalEndcapSiHitsEvenDigiRelations ECalEndcapSiHitsOddDigiRelations </parameter>
    <parameter name="OutputCollection" type="string"> EcalEndcapsRelationsSimDigi </parameter>
  </processor>
  <processor name="MergeEcalBarrelRelRecHits" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec"> ECalBarrelSiHitsEvenRecRelations ECalBarrelSiHitsOddRecRelations </parameter>
    <parameter name="OutputCollection" type="string"> EcalBarrelRelationsSimRec </parameter>
  </processor>
  <processor name="MergeEcalEndcapRelRecHits" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec"> ECalEndcapSiHitsEvenDigiRelations ECalEndcapSiHitsOddDigiRelations </parameter>
    <parameter name="OutputCollection" type="string"> EcalEndcapsRelationsSimRec </parameter>
  </processor>

</group>