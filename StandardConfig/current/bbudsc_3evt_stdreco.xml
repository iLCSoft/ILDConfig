<!--
      Example steering file to run the standard reconstruction on the 3 ttbar events 
      simulated with Mokka in this example directory.

      Works with ilcsoft v01-17-08

      Defines the standard reconstruction for ILD.
-->


 <marlin>
   
   <execute>
     <processor name="MyAIDAProcessor"/>
     
     <!-- =========  overlay gamma gamma background  === -->
     <!-- activate for production -->
     <processor name="BgOverlay" />

     <!-- ========== track digitization and tracking  === -->
<!-- concerning the VXD digitisation, one can use one of the following VXD models-->
<!-- DBD VXD, conservative CMOS design and ambitious CMOS design, cf  -->
<!-- please not forget to consider the corresponding time resolutions when overlaying beam(pair)bkg!-->
     <!--processor name="VXDPlanarDigiProcessor_DBDVXD"/-->
     <!--processor name="VXDPlanarDigiProcessor_CMOSVXD1"/-->
     <processor name="VXDPlanarDigiProcessor_CMOSVXD5"/>


     <processor name="SITPlanarDigiProcessor"/>
     <processor name="SITSpacePointBuilder" />

     <processor name="FTDPixelPlanarDigiProcessor"/>
     <processor name="FTDStripPlanarDigiProcessor"/>
     <processor name="FTDSpacePointBuilder"/>

     <processor name="SETPlanarDigiProcessor"/>
     <processor name="SETSpacePointBuilder" />

     <processor name="MyTPCDigiProcessor"/>
     
     <!-- ========== the new C++ tracking =============== -->
     <!-- ========== TPC patrec =============== -->
     <processor name="MyClupatraProcessor" />
      
     <!-- ========== central silicon tracking =============== -->
     <!-- ========== standard DBD version =============== -->
     <!--processor name="MySiliconTracking_MarlinTrk"/-->  
     <!-- ========== mini-vectors - make sure you use matching digitizer! =============== -->
     <processor name="MyCellsAutomatonMV"/>
     <!-- ========== FPCCD - make sure you use matching digitizer! =============== -->
     <!--processor name="MyFPCCDSiliconTracking_MarlinTrk"/-->  
     
     <processor name="MyForwardTracking"/><!--create fwd tracks in parallel -->
     <processor name="MyTrackSubsetProcessor" /><!-- combine Silicon and Forward Tracking -->     
     <processor name="MyFullLDCTracking_MarlinTrk"/>  

     <!-- ========== dE/dx   ================= -->
     <processor name="MyCompute_dEdxProcessor"/>  

     <!-- ========== the track cheater   ================= -->
     <!-- XXXprocessor name="MyTruthTracker"/ -->    

     <!-- ========== the post tracking patrec   ================= -->

     <processor name="MyV0Finder"/>                
     <processor name="MyKinkFinder"/>         
     
     <!-- ========== calorimeter digitization ======= -->
     <processor name="MyILDCaloDigi"/>
     <processor name="MySimpleBCalDigi"/>    
     <processor name="MySimpleLCalDigi"/>    
     <processor name="MySimpleLHCalDigi"/>   
     <processor name="MySimpleMuonDigi"/>    
     
     <!-- ========== optionally: GARLIC ======= -->
     <!--processor name="MyECALPreClustering"/--> 
     <!--processor name="MyGarlicProcessor"/-->  
     
     <!-- ========== PFA ======= -->
     <!-- options to chose in processor steering: -->
     <!-- "normal" , improved photons, Garlic -->
     <processor name="MyMarlinPandora"/>
     <!-- < uncomment for JER studies /> -->
     <!-- <processor name="MyPfoAnalysis" /> -->

     <!-- ========== covanriance matrix for charged PFOs  ======= -->
     <!-- ========== should be done by MarlinPandora eventually ======= -->
     <processor name="MyAdd4MomCovMatrixCharged"/>

     <!-- ========== cluster position and direction w/ covariance; covariance matrix for neutral PFOs  ======= -->
     <processor name="MyAddClusterProperties"/>

     <!-- ========== BeamCal ======= -->
     <processor name="MyBeamCalClusterReco"/>

     <!-- ========== cluster position and direction w/ covariance; covariance matrix for neutral BeamCal PFOs  ======= -->
     <processor name="BCalAddClusterProperties"/>

     <!-- ========== Shower Profiles   ================= -->
     <processor name="MyComputeShowerShapesProcessor"/>    

     <!-- ========== GammaGammaCandidateFinder   ================= -->
     <processor name="MyPi0Finder"/>
     <processor name="MyEtaFinder"/> 
     <processor name="MyEtaPrimeFinder"/>  


     <processor name="MyGammaGammaSolutionFinder"/> 
     <processor name="MyDistilledPFOCreator"/> 
 
     <!-- ========== particle ID ============================ -->
     <processor name="MyLikelihoodPID" />

     <!-- ========== tau finding (moved to postDST.xml) =========== -->
     <!--processor name="MyTauFinder" /-->

     <!-- ========== full and DST output ==================== -->
     <processor name="MyRecoMCTruthLinker"/>
     
     <!-- ========== vertex finder ========================== -->
     <processor name="VertexFinder"/>
     
     <processor name="MyLCIOOutputProcessor"/>
     <processor name="DSTOutput"/>
   </execute>

       <!-- /pnfs/desy.de/ilc/prod/ilc/mc-dbd/ild/sim/500-TDR_ws/higgs_ffh/ILD_o1_v05/v01-14-01-p00/sv01-14-01-p00.mILD_o1_v05.E500-TDR_ws.I106519.Pe2e2h.eL.pR-00001.slcio -->
   <global>
      <parameter name="LCIOInputFiles">
       ./bbudsc_3evt.slcio 
      </parameter>
      <parameter name="GearXMLFile" value="GearOutput.xml"/>
      <parameter name="MaxRecordNumber" value="4"/>
      <parameter name="SkipNEvents" value="0"/>
      <parameter name="SupressCheck" value="false"/>
      <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> MESSAGE </parameter>
      <parameter name="RandomSeed" value="1234567890" />
   </global>

 <processor name="MyLCIOOutputProcessor" type="LCIOOutputProcessor">
  <!--   standard output: full reconstruction keep all collections -->
  <parameter name="LCIOOutputFile" type="string" >
    <!--    ./rHEAD-2016-02-14.sv01-14-01-p00.mILD_o1_v05.E500-TDR_ws.I106519.Pe2e2h.eL.pR-00001-REC.slcio -->
    ./bbudsc_3evt_REC.slcio
  </parameter>
  <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
  <!--parameter name="SplitFileSizekB" type="int" value="1992294"/-->
 </processor>

 <processor name="DSTOutput" type="LCIOOutputProcessor">
   <!--   
     DST output: drop all hits, skim MCParticles and keep final Tracks, Clusters, Vertices and  ReconstructedParticles 
   -->
   <parameter name="LCIOOutputFile" type="string" >
     <!--  ./rHEAD-2016-02-14.sv01-14-01-p00.mILD_o1_v05.E500-TDR_ws.I106519.Pe2e2h.eL.pR-00001-DST.slcio -->
      ./bbudsc_3evt_DST.slcio
   </parameter>
   <parameter name="DropCollectionTypes" type="StringVec"> 
       MCParticle 
       SimTrackerHit 
       SimCalorimeterHit
       TrackerHit 
       TrackerHitPlane 
       CalorimeterHit 
       LCRelation
       Track 
       LCFloatVec      
    </parameter>
    <parameter name="FullSubsetCollections" type="StringVec" value="MCParticlesSkimmed"/>
    <parameter name="KeepCollectionNames" type="StringVec"> 
      MCParticlesSkimmed 
      MarlinTrkTracks
      MCTruthMarlinTrkTracksLink
      MarlinTrkTracksMCTruthLink
      MCTruthClusterLink
      ClusterMCTruthLink
      RecoMCTruthLink
      MCTruthRecoLink
    </parameter>
    <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
    <!--parameter name="SplitFileSizekB" type="int" value="1992294"/-->
 </processor>
 
 <processor name="MyAIDAProcessor" type="AIDAProcessor">
 <!--Processor that handles AIDA files. Creates on directory per processor.  Processors only need to create and fill the histograms, clouds and tuples. Needs to be the first ActiveProcessor-->
  <!-- compression of output file 0: false >0: true (default) -->
  <parameter name="Compress" type="int" value="1"/>
  <!-- filename without extension-->
  <parameter name="FileName" type="string" value="bbudsc_3evt_stdreco"/>
  <!-- type of output file xml (default) or root ( only OpenScientist)-->
  <parameter name="FileType" type="string" value="root "/>
</processor>


 <processor name="BgOverlay" type="Overlay">
  <!--Opens a second (chain of) lcio file(s) and overlays events...-->
  <!--Pairs of collection to be merged-->
  <parameter name="CollectionMap" type="StringVec">
    BeamCalCollection                     BeamCalCollection                     
    COILCollection                        COILCollection                        
    EcalBarrelSiliconCollection           EcalBarrelSiliconCollection           
    EcalBarrelSiliconPreShowerCollection  EcalBarrelSiliconPreShowerCollection  
    EcalEndcapRingCollection              EcalEndcapRingCollection              
    EcalEndcapRingPreShowerCollection     EcalEndcapRingPreShowerCollection     
    EcalEndcapSiliconCollection           EcalEndcapSiliconCollection           
    EcalEndcapSiliconPreShowerCollection  EcalEndcapSiliconPreShowerCollection  
    FTD_PIXELCollection                   FTD_PIXELCollection                   
    FTD_STRIPCollection                   FTD_STRIPCollection                   
    HcalBarrelRegCollection               HcalBarrelRegCollection               
    HcalEndCapRingsCollection             HcalEndCapRingsCollection             
    HcalEndCapsCollection                 HcalEndCapsCollection                 
    LumiCalCollection                     LumiCalCollection  
    LHcalCollection                       LHcalCollection
    MCParticle                            MCParticle                            
    MuonBarrelCollection                  MuonBarrelCollection                  
    MuonEndCapCollection                  MuonEndCapCollection                  
    SETCollection                         SETCollection                         
    SITCollection                         SITCollection                         
    TPCCollection                         TPCCollection                         
    TPCSpacePointCollection               TPCSpacePointCollection               
    VXDCollection                         VXDCollection                         
  </parameter>
  <!--Name of the lcio input file(s)-->
  <parameter name="InputFileNames" type="StringVec"> 
      /afs/desy.de/project/ilcsoft/www/html/data/ilctest/sv01-14-01-p00.mILD_o1_v05.E1000-B1b_ws.Paa_lowpt.I106472.eR80.pL20-00001.slcio
  </parameter>
  <!--Overlay each event with this number of background events. (default 0)-->
  <parameter name="NumberOverlayEvents" type="int"> 0 </parameter>

  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <parameter name="Verbosity" type="string"> WARNING </parameter>

  <!--Add additional background events according to a poisson distribution with this expectation value. (non, if parameter not set)
      1 TeV: 4.1, 500 GeV 1.7 used in DBD, 1.2 would have been (more) correct -->
  <parameter name="expBG" type="double">1.7 </parameter>
  <!--Overlay each event with the content of one run.-->
  <parameter name="runOverlay" type="bool">false </parameter>

  <!--Maximum number of events to skip between overlayd events (choosen from flat intervall [0,NSkipEventsRandom] )-->
  <parameter name="NSkipEventsRandom" type="int">0</parameter>

</processor>


 <processor name="VXDPlanarDigiProcessor_DBDVXD" type="PlanarDigiProcessor">
   <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
   <!--whether hits are 1D strip hits-->
   <!--Please edit single point resolution values according to the examined VXD design - here we had put an numbers of an example CMOS VXD-->
   <parameter name="IsStrip" type="bool">false </parameter>
   <!--resolution in direction of u-->
   <parameter name="ResolutionU" type="float"> 0.0028 0.006 0.004 0.004 0.004 0.004 </parameter>
   <!--resolution in direction of v-->
   <parameter name="ResolutionV" type="float"> 0.0028 0.006 0.004 0.004 0.004 0.004  </parameter>
   <!--Name of the Input SimTrackerHit collection-->
   <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">VXDCollection </parameter>
   <!--Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">VXDTrackerHitRelations </parameter>
   <!--Name of the TrackerHit output collection-->
   <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">VXDTrackerHits </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
 </processor>

 <processor name="VXDPlanarDigiProcessor_CMOSVXD1" type="PlanarDigiProcessor">
   <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
   <!--whether hits are 1D strip hits-->
   <!--Please edit single point resolution values according to the examined VXD design - here we had put an numbers of an example CMOS VXD-->
   <parameter name="IsStrip" type="bool">false </parameter>
   <!--resolution in direction of u-->
   <parameter name="ResolutionU" type="float"> 0.0028 0.006 0.004 0.01 0.004 0.01 </parameter>
   <!--resolution in direction of v-->
   <parameter name="ResolutionV" type="float"> 0.0028 0.006 0.004 0.01 0.004 0.01  </parameter>
   <!--Name of the Input SimTrackerHit collection-->
   <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">VXDCollection </parameter>
   <!--Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">VXDTrackerHitRelations </parameter>
   <!--Name of the TrackerHit output collection-->
   <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">VXDTrackerHits </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
 </processor>

 <processor name="VXDPlanarDigiProcessor_CMOSVXD5" type="PlanarDigiProcessor">
   <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
   <!--whether hits are 1D strip hits-->
   <!--Please edit single point resolution values according to the examined VXD design - here we had put an numbers of an example CMOS VXD-->
   <parameter name="IsStrip" type="bool">false </parameter>
   <!--resolution in direction of u-->
   <parameter name="ResolutionU" type="float"> 0.003 0.003 0.003 0.003 0.003 0.003 </parameter>
   <!--resolution in direction of v-->
   <parameter name="ResolutionV" type="float"> 0.003 0.003 0.003 0.003 0.003 0.003  </parameter>
   <!--Name of the Input SimTrackerHit collection-->
   <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">VXDCollection </parameter>
   <!--Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">VXDTrackerHitRelations </parameter>
   <!--Name of the TrackerHit output collection-->
   <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">VXDTrackerHits </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
 </processor> 


 <processor name="SITPlanarDigiProcessor" type="PlanarDigiProcessor">
   <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
   <!--whether hits are 1D strip hits-->
   <parameter name="IsStrip" type="bool">true </parameter>
   <!--resolution in direction of u-->
   <parameter name="ResolutionU" type="float">0.007 </parameter>
   <!--resolution in direction of v-->
   <parameter name="ResolutionV" type="float">0 </parameter>
   <!--Name of the Input SimTrackerHit collection-->
   <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">SITCollection </parameter>
   <!--Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">SITTrackerHitRelations </parameter>
   <!--Name of the TrackerHit output collection-->
   <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">SITTrackerHits </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
 </processor>


 <processor name="SITSpacePointBuilder" type="SpacePointBuilder">
   <!--SpacePointBuilder combine si-strip measurements into 3D spacepoints (1TrackerHitPlanar+1TrackHitPlanar = 1 TrackerHit), that can be used by reconstruction-->
   <!--Name of the SpacePoint SimTrackerHit relation collection-->
   <parameter name="SimHitSpacePointRelCollection" type="string" lcioOutType="LCRelation"> SITSpacePointRelations </parameter>
   <!--SpacePointsCollection-->
   <parameter name="SpacePointsCollection" type="string" lcioOutType="TrackerHit"> SITSpacePoints </parameter>
  <!--TrackerHitCollection-->  
  <parameter name="TrackerHitCollection" type="string" lcioInType="TrackerHitPlane"> SITTrackerHits </parameter>
  <!--The name of the input collection of the relations of the TrackerHits to SimHits-->
  <parameter name="TrackerHitSimHitRelCollection" type="string" lcioInType="LCRelation"> SITTrackerHitRelations </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
</processor>


 <processor name="FTDPixelPlanarDigiProcessor" type="PlanarDigiProcessor">
   <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
   <!--whether hits are 1D strip hits-->
   <parameter name="IsStrip" type="bool">false </parameter>
   <!--resolution in direction of u-->
   <parameter name="ResolutionU" type="float">0.003 </parameter>
   <!--resolution in direction of v-->
   <parameter name="ResolutionV" type="float">0.003 </parameter>
   <!--Name of the Input SimTrackerHit collection-->
   <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">FTD_PIXELCollection </parameter>
   <!--Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">FTDPixelTrackerHitRelations </parameter>
   <!--Name of the TrackerHit output collection-->
   <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">FTDPixelTrackerHits </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
 </processor>


 <processor name="FTDStripPlanarDigiProcessor" type="PlanarDigiProcessor">
   <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
   <!--whether hits are 1D strip hits-->
   <parameter name="IsStrip" type="bool">true </parameter>
   <!--resolution in direction of u-->
   <parameter name="ResolutionU" type="float">0.007 </parameter>
   <!--resolution in direction of v-->
   <parameter name="ResolutionV" type="float">0.0 </parameter>
   <!--Name of the Input SimTrackerHit collection-->
   <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">FTD_STRIPCollection </parameter>
   <!--Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">FTDStripTrackerHitRelations </parameter>
   <!--Name of the TrackerHit output collection-->
   <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">FTDStripTrackerHits </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
 </processor>

 
 <processor name="SETPlanarDigiProcessor" type="PlanarDigiProcessor">
   <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
   <!--whether hits are 1D strip hits-->
   <parameter name="IsStrip" type="bool">true </parameter>
   <!--resolution in direction of u-->
   <parameter name="ResolutionU" type="float">0.007 </parameter>
   <!--resolution in direction of v-->
   <parameter name="ResolutionV" type="float">0 </parameter>
   <!--Name of the Input SimTrackerHit collection-->
   <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">SETCollection </parameter>
   <!--Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">SETTrackerHitRelations </parameter>
   <!--Name of the TrackerHit output collection-->
   <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">SETTrackerHits </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
 </processor>


 <processor name="SETSpacePointBuilder" type="SpacePointBuilder">
   <!--SpacePointBuilder combine si-strip measurements into 3D spacepoints (1TrackerHitPlanar+1TrackHitPlanar = 1 TrackerHit), that can be used by reconstruction-->
   <!--Name of the SpacePoint SimTrackerHit relation collection-->
   <parameter name="SimHitSpacePointRelCollection" type="string" lcioOutType="LCRelation"> SETSpacePointRelations </parameter>
   <!--SpacePointsCollection-->
   <parameter name="SpacePointsCollection" type="string" lcioOutType="TrackerHit"> SETSpacePoints </parameter>
  <!--TrackerHitCollection-->  
  <parameter name="TrackerHitCollection" type="string" lcioInType="TrackerHitPlane"> SETTrackerHits </parameter>
  <!--The name of the input collection of the relations of the TrackerHits to SimHits-->
  <parameter name="TrackerHitSimHitRelCollection" type="string" lcioInType="LCRelation"> SETTrackerHitRelations </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
</processor>


 <processor name="FTDSpacePointBuilder" type="SpacePointBuilder">
   <!--SpacePointBuilder combine si-strip measurements into 3D spacepoints (1TrackerHitPlanar+1TrackHitPlanar = 1 TrackerHit), that can be used by reconstruction-->
   <!--Name of the SpacePoint SimTrackerHit relation collection-->
   <parameter name="SimHitSpacePointRelCollection" type="string" lcioOutType="LCRelation">FTDSpacePointRelations </parameter>
   <!--SpacePointsCollection-->
   <parameter name="SpacePointsCollection" type="string" lcioOutType="TrackerHit">FTDSpacePoints </parameter>                                                                
   <!--TrackerHitCollection-->
   <parameter name="TrackerHitCollection" type="string" lcioInType="TrackerHitPlane">FTDStripTrackerHits </parameter>
   <!--The name of the input collection of the relations of the TrackerHits to SimHits-->
   <parameter name="TrackerHitSimHitRelCollection" type="string" lcioInType="LCRelation">FTDStripTrackerHitRelations </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->                                            
 </processor>



  <processor name="MyTPCDigiProcessor" type="TPCDigiProcessor">
 <!--Produces TPC TrackerHit collection from SimTrackerHit collection, smeared in RPhi and Z. A search is made for adjacent hits on a pad row, if they are closer in z and r-phi than the steering parameters _doubleHitResRPhi (default value 2.0 mm) and _doubleHitResZ (default value 5.0 mm) they are considered to overlap. Clusters of hits smaller than _maxMerge (default value 3) are merged into a single tracker hit, with the position given as the average poision of the hits in phi and in z. Clusters which have _maxMerge hits or more are determined to be identifiable as multiple hits, and are not added to the tracker hit collection. This of course means that good hits caught up in a cluster of background hits will be lossed.-->
  <!--R-Phi Diffusion Coefficent in TPC-->
  <parameter name="DiffusionCoeffRPhi" type="float">0.025 </parameter>
  <!--Z Diffusion Coefficent in TPC-->
  <parameter name="DiffusionCoeffZ" type="float">0.08 </parameter>
  <!--Defines the minimum distance for two seperable hits in RPhi-->
  <parameter name="DoubleHitResolutionRPhi" type="float">2 </parameter>
  <!--Defines the minimum distance for two seperable hits in Z-->
  <parameter name="DoubleHitResolutionZ" type="float">5 </parameter>
  <!--Defines spatial slice in RP-->
  <parameter name="HitSortingBinningRPhi" type="float">2 </parameter>
  <!--Defines spatial slice in Z-->
  <parameter name="HitSortingBinningZ" type="float">5 </parameter>
  <!--Defines the maximum number of adjacent hits which can be merged-->
  <parameter name="MaxClusterSizeForMerge" type="int">3 </parameter>
  <!--Number of Effective electrons per pad in TPC-->
  <parameter name="N_eff" type="int">22 </parameter>
  <!--Pad Phi Resolution constant in TPC-->
  <parameter name="PointResolutionPadPhi" type="float">0.9 </parameter>
  <!--R-Phi Resolution constant in TPC-->
  <parameter name="PointResolutionRPhi" type="float">0.05 </parameter>
  <!--TPC Z Resolution Coefficent independent of diffusion-->
  <parameter name="PointResolutionZ" type="float">0.4 </parameter>
  <!--whether or not to use hits without proper cell ID (pad row)-->
  <parameter name="RejectCellID0" type="int">1 </parameter>
  <!--Name of the LowPt SimTrackerHit collection Produced by Mokka TPC Driver TPC0X-->
  <parameter name="TPCLowPtCollectionName" type="string" lcioInType="SimTrackerHit">TPCLowPtCollection </parameter>
  <!--Name of the default pad-row based SimTrackerHit collection-->
  <parameter name="TPCPadRowHitCollectionName" type="string" lcioInType="SimTrackerHit">TPCCollection </parameter>
  <!--Name of the additional space point collection which provides additional guide hits between pad row centers.-->
  <parameter name="TPCSpacePointCollectionName" type="string" lcioInType="SimTrackerHit">TPCSpacePointCollection </parameter>
  <!--Name of the Output TrackerHit collection-->
  <parameter name="TPCTrackerHitsCol" type="string" lcioOutType="TrackerHit"> TPCTrackerHits </parameter>
  <!--Name of the Name of TrackerHit SimTrackHit relation collection-->
  <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">TPCTrackerHitRelations </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string"> MESSAGE </parameter-->
</processor>


  <processor name="MyClupatraProcessor" type="ClupatraProcessor">
    <!--ClupatraProcessor : nearest neighbour clustering seeded pattern recognition-->
    <!--the maximum chi2-distance for which a hit is considered for merging -->
    <parameter name="Chi2Cut" type="float">100 </parameter>
    <!--optionally create some debug collection with intermediate track segments and used and unused hits-->
    <parameter name="CreateDebugCollections" type="bool"> false true  </parameter>
    <!--Cut for distance between hits in mm-->
    <parameter name="DistanceCut" type="float">40 </parameter>
    <!--allowed fraction of hits in same pad row per track-->
    <parameter name="DuplicatePadRowFraction" type="float">0.1 </parameter>
    <!--Use Energy Loss in Fit-->
    <parameter name="EnergyLossOn" type="bool"> true </parameter>
    <!--the maximum delta Chi2 for which a hit is added to a track segement-->
    <parameter name="MaxDeltaChi2" type="float">35 </parameter>
    <!--the maximum number of layers without finding a hit before hit search search is stopped -->
    <parameter name="MaxStepWithoutHit" type="int">6 </parameter>
    <!--minimum fraction of layers that have a given multiplicity, when forcing a cluster into sub clusters-->
    <parameter name="MinLayerFractionWithMultiplicity" type="float">0.5 </parameter>
    <!--minimum number of layers that have a given multiplicity, when forcing a cluster into sub clusters-->
    <parameter name="MinLayerNumberWithMultiplicity" type="int">3 </parameter>
    <!--minimum number of hits per cluster-->
    <parameter name="MinimumClusterSize" type="int">6 </parameter>
    <!--Use MultipleScattering in Fit-->
    <parameter name="MultipleScatteringOn" type="bool">false true </parameter>
    <!--number of bins in z over total length of TPC - hits from different z bins are nver merged-->
    <parameter name="NumberOfZBins" type="int">150 </parameter>
    <!--Name of the output collection-->
    <parameter name="OutputCollection" type="string" lcioOutType="Track">ClupatraTracks </parameter>
    <!--Name of the output collection that has the individual track segments-->
    <parameter name="SegmentCollectionName" type="string" lcioOutType="Track">ClupatraTrackSegments </parameter>

    <!--number of pad rows used in initial seed clustering-->
    <parameter name="PadRowRange" type="int">15 </parameter>
    
    <!--try to pick up hits from Si-trackers-->
    <parameter name="pickUpSiHits" type="bool">false </parameter>
    <!--name of the SIT hit collections - used to extend TPC tracks if (pickUpSiHits==true)-->
    <parameter name="SITHitCollection" type="string">SITTrackerHits </parameter>
    <!--name of the VXD hit collections - used to extend TPC tracks if (pickUpSiHits==true)-->
    <parameter name="VXDHitCollection" type="string">VXDTrackerHits </parameter>
    
    <!--Smooth All Mesurement Sites in Fit-->
    <parameter name="SmoothOn" type="bool">false </parameter>
    <!--Name of the tpc hit input collections-->
    <parameter name="TPCHitCollection" type="string" lcioInType="TrackerHit">TPCTrackerHits </parameter>
    
   <!--maximum radial distance [mm] from outer field cage of last hit, such that the track is considered to end at the end -->
   <parameter name="TrackEndsOuterCentralDist" type="float">25 </parameter>
   <!--maximum distance in z [mm] from endplate of last hit, such that the track is considered to end at the end -->
   <parameter name="TrackEndsOuterForwardDist" type="float">40 </parameter>
   <!--minimum curvature omega of a track segment for being considered a curler-->
   <parameter name="TrackIsCurlerOmega" type="float">0.001 </parameter>
   <!--maximum radial distance [mm] from inner field cage of first hit, such that the track is considered to start at the beginning -->
   <parameter name="TrackStartsInnerDist" type="float">25 </parameter>

   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">MESSAGE DEBUG5 </parameter-->
  </processor>
  
<!--###########  standard silicon tracking #################################    -->

 <processor name="MySiliconTracking_MarlinTrk" type="SiliconTracking_MarlinTrk">
 <!--Pattern recognition in silicon trackers-->
  <!--Angle Cut For Merging-->
  <parameter name="AngleCutForMerging" type="float">0.1 </parameter>
  <!--Check for Delta rays hits in hit-to-track assignment-->
  <parameter name="CheckForDelta" type="int">1 </parameter>
  <!--Chi2 Fit Cut-->
  <parameter name="Chi2FitCut" type="float">120 </parameter>
  <!--Chi2 Prefit Cut-->
  <parameter name="Chi2PrefitCut" type="float">1e+10 </parameter>
  <!--Chi2WRphiQuartet-->
  <parameter name="Chi2WRphiQuartet" type="float">1 </parameter>
  <!--Chi2WRphiSeptet-->
  <parameter name="Chi2WRphiSeptet" type="float">1 </parameter>
  <!--Chi2WRphiTriplet-->
  <parameter name="Chi2WRphiTriplet" type="float">1 </parameter>
  <!--Chi2WZQuartet-->
  <parameter name="Chi2WZQuartet" type="float">0.5 </parameter>
  <!--Chi2WZSeptet-->
  <parameter name="Chi2WZSeptet" type="float">0.5 </parameter>
  <!--Chi2WZTriplet-->
  <parameter name="Chi2WZTriplet" type="float">0.5 </parameter>
  <!--cut on D0 for tracks-->
  <parameter name="CutOnD0" type="float">100 </parameter>
  <!--cut on Pt-->
  <parameter name="CutOnPt" type="float">0.05 </parameter>
  <!--cut on Z0 for tracks-->
  <parameter name="CutOnZ0" type="float">100 </parameter>
  <!--Use Energy Loss in Fit-->
  <parameter name="EnergyLossOn" type="bool"> true </parameter>
  <!--FTD Pixel Hit Collection Name-->
  <parameter name="FTDPixelHitCollectionName" type="string" lcioInType="TrackerHitPlane"> FTDPixelTrackerHits </parameter>
  <!--FTD FTDSpacePoint Collection Name-->
  <parameter name="FTDSpacePointCollection" type="string" lcioInType="TrackerHit"> FTDSpacePoints </parameter>
  <!--Fast attachment-->
  <parameter name="FastAttachment" type="int">0 </parameter>
  <!--Value used for the initial d0 variance of the trackfit-->
  <parameter name="InitialTrackErrorD0" type="float">1e+06 </parameter>
  <!--Value used for the initial omega variance of the trackfit-->
  <parameter name="InitialTrackErrorOmega" type="float">0.0001 </parameter>
  <!--Value used for the initial phi0 variance of the trackfit-->
  <parameter name="InitialTrackErrorPhi0" type="float">100 </parameter>
  <!--Value used for the initial tanL variance of the trackfit-->
  <parameter name="InitialTrackErrorTanL" type="float">100 </parameter>
  <!--Value used for the initial z0 variance of the trackfit-->
  <parameter name="InitialTrackErrorZ0" type="float">1e+06 </parameter>
  <!--Combinations of Hits in Layers-->
  <parameter name="LayerCombinations" type="IntVec"> 
    8 6 5  8 6 4  8 6 3  8 6 2
    8 5 3  8 5 2  8 4 3  8 4 2  
    6 5 3  6 5 2  6 4 3  6 4 2 
    6 3 1  6 3 0  6 2 1  6 2 0 
    5 3 1  5 3 0  5 2 1  5 2 0
    4 3 1  4 3 0  4 2 1  4 2 0    
  </parameter>
  <!--Combinations of Hits in FTD-->
  <parameter name="LayerCombinationsFTD" type="IntVec"> 
    13 11  9    13 11 8    13 10 9    13 10 8
    12 11  9    12 11 8    12 10 9    12 10 8
    11  9  7    11  9 6    11  8 7    11  8 6 
    10  9  7    10  9 6    10  8 7    10  8 6
    9  7  5     9  7 4     9  6 5     9  6 4
    8  7  5     8  7 4     8  6 5     8  6 4
    7  5  3     7  5 2     7  4 3     7  4 2
    6  5  3     6  5 2     6  4 3     6  4 2
    5  3  1     5  3 0     5  2 1     5  2 0
    4  3  1     4  3 0     4  2 1     4  2 0
  </parameter>
  <!--Maximum Chi-squared value allowed when assigning a hit to a track-->
  <parameter name="MaxChi2PerHit" type="double">100 </parameter>
  <!--Maximal number of hits allowed in one theta-phi sector in VXD/SIT and FTD-->
  <parameter name="MaxHitsPerSector" type="int">100 </parameter>
  <!--MinDistCutAttach-->
  <parameter name="MinDistCutAttach" type="float">2.5 </parameter>
  <!--Minimal distance of track hit to the delta electron hit-->
  <parameter name="MinDistToDelta" type="float">0.25 </parameter>
  <!--MinLayerToAttach-->
  <parameter name="MinLayerToAttach" type="int">-1 </parameter>
  <!--minimal hits-->
  <parameter name="MinimalHits" type="int">3 </parameter>
  <!--Use MultipleScattering in Fit-->
  <parameter name="MultipleScatteringOn" type="bool"> true </parameter>
  <!--Number of divisions in Phi-->
  <parameter name="NDivisionsInPhi" type="int"> 80 </parameter>
  <!--Number of divisions in Phi for FTD-->
  <parameter name="NDivisionsInPhiFTD" type="int"> 30 </parameter>
  <!--Number of divisions in Theta-->
  <parameter name="NDivisionsInTheta" type="int"> 80 </parameter>
  <!--Maximal number of hits for which a track with n hits is better than one with n-1hits. (defaut 5)-->
  <parameter name="NHitsChi2" type="int">5 </parameter>
  <!--Run MarlinTrk Diagnostics. MarlinTrk must be compiled with MARLINTRK_DIAGNOSTICS_ON defined-->
  <parameter name="RunMarlinTrkDiagnostics" type="bool">false </parameter>
  <!--SIT Hit Collection Name-->
  <parameter name="SITHitCollectionName" type="string" lcioInType="TrackerHit"> SITSpacePoints </parameter>
  <!--Silicon track Collection Name-->
  <parameter name="SiTrackCollectionName" type="string" lcioOutType="Track">SiTracks </parameter>
 <!--Smooth All Mesurement Sites in Fit-->
  <parameter name="SmoothOn" type="bool"> false </parameter>
  <!--Use SIT-->
  <parameter name="UseSIT" type="int">1 </parameter>
  <!--UseEventDisplay-->
  <parameter name="UseEventDisplay" type="bool"> false </parameter>
  <!--VTX Hit Collection Name-->
  <parameter name="VTXHitCollectionName" type="string" lcioInType="TrackerHitPlane">VXDTrackerHits </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
</processor>

<!--###########  mini-vector tracking #################################    -->

<processor name="MyCellsAutomatonMV" type="CellsAutomatonMV">
   <!--ForwardTracking reconstructs tracks through the FTDs-->
   <!--Name of the Cellular Automaton Tracking output collection-->
   <parameter name="CATrackCollection" type="string" lcioOutType="Track"> SiTracks </parameter>
   <!--Use Energy Loss in Fit-->
   <parameter name="EnergyLossOn" type="bool">true </parameter>
   <!--Number of divisions in Phi-->
   <parameter name="NDivisionsInPhi" type="int"> 160 </parameter>
   <!--Number of divisions in Theta-->
   <parameter name="NDivisionsInTheta" type="int"> 80 </parameter>
   <!--Number of divisions in Phi in  order to create mini-vectors-->
   <parameter name="NDivisionsInPhiMV" type="int"> 80 </parameter>
   <!--Number of divisions in Theta  in  order to create mini-vectors-->
   <parameter name="NDivisionsInThetaMV" type="int"> 80 </parameter>
   <!--VXD Hit Collections-->
   <parameter name="VTXHitCollectionName" type="StringVec"> VXDTrackerHits </parameter>
   <!--SIT Hit Collections-->
   <parameter name="SITHitCollectionName" type="StringVec"> SITSpacePoints </parameter>
   <!--Use MultipleScattering in Fit-->
   <parameter name="MultipleScatteringOn" type="bool">true </parameter>
   <!--Smooth All Measurement Sites in Fit-->
   <parameter name="SmoothOn" type="bool">false </parameter>
   <!--Cut on minimum PT-->
   <parameter name="PTCut" type="double"> 0.0 </parameter>
   <!--Use SIT-->
   <parameter name="UseSIT" type="int"> 1 </parameter>
   <!--The chi2 probability value below which tracks will be cut-->
   <parameter name="Chi2ProbCut" type="double">0.005 </parameter>
   <!--the maximum chi2/Ndf that is allowed as result of a helix fit-->
   <parameter name="HelixFitMax" type="double"> 100 </parameter>
   <!--the maximum chi2/Ndf that is allowed as result of a Kalman fit-->
   <parameter name="kalFitMax" type="double"> 10 </parameter>
   <!--The minimum number of hits to create a track-->
   <parameter name="HitsPerTrackMin" type="int"> 2 </parameter>
   <!--Maximal number of hits for which a track with n hits is better than one with n-1hits-->
   <parameter name="NHitsChi2" type="int"> 6 </parameter>
   <!--The method used to find the best non overlapping subset of tracks. Available are: SubsetHopfieldNN and SubsetSimple or NoSelection-->
   <parameter name="BestSubsetFinder" type="string"> SubsetSimple </parameter>
   <!--Whether when adding hits to a track only the track with highest quality should be further processed-->
   <!--parameter name="TakeBestVersionOfTrack" type="bool">true </parameter-->
   <!--If the automaton has more connections than this it will be redone with the next parameters-->
   <parameter name="MaxConnectionsAutomaton" type="int"> 10000000 </parameter>
   <!--Maximal number of hits allowed on a sector-->
   <parameter name="MaxHitsPerSector" type="int">1000 </parameter>
   <!--The maximum distance between two hits in adjacent layers in order to form a minivector-->
   <parameter name="MaxDistance" type="double"> 5.0 </parameter>
   <!--The difference in polar angle (in degrees)  between two hits in adjacent layers in order to form a minivector-->
   <parameter name="MVHitsThetaDifference" type="double"> 0.1 </parameter>
   <!--The difference in polar angle (in degrees)  between two hits in the INNER layer in order to form a minivector-->
   <parameter name="MVHitsThetaDifferenceInner" type="double"> 0.1 </parameter>
   <!--The maximum step between layers-->
   <parameter name="StepMax" type="int"> 4 </parameter>
   <!--The last layer that can be connected directly with the IP-->
   <parameter name="LastLayerToIP" type="int"> 4 </parameter>
   
   <parameter name="Crit2_3DAngle_MV_min" type="float"> 0.0 </parameter>
   <parameter name="Crit2_3DAngle_MV_max" type="float"> 15.0 </parameter>
   <parameter name="Crit2_DeltaPhi_MV_min" type="float"> 0.0 </parameter>
   <parameter name="Crit2_DeltaPhi_MV_max" type="float"> 15.0 </parameter>
   <parameter name="Crit2_DeltaPhi_MV_InnLayer_min" type="float"> 0.0 </parameter>
   <parameter name="Crit2_DeltaPhi_MV_InnLayer_max" type="float"> 5.0 </parameter>
   <parameter name="Crit2_DeltaTheta_MV_min" type="float"> 0.0 </parameter>
   <parameter name="Crit2_DeltaTheta_MV_max" type="float"> 1.5 </parameter>
   <parameter name="Crit3_NoZigZag_MV_min" type="float"> -1.0 </parameter>
   <parameter name="Crit3_NoZigZag_MV_max" type="float"> 1.0 </parameter>
   <parameter name="Crit3_PT_MV_min" type="float"> 0.35 </parameter>
   <parameter name="Crit3_PT_MV_max" type="float"> 999999 </parameter>   
   <parameter name="Criteria" type="StringVec">
      Crit2_DeltaPhi_MV
      Crit2_DeltaTheta_MV
      Crit3_NoZigZag_MV
   </parameter>
   
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <parameter name="Verbosity" type="string"> MESSAGE </parameter>
   
</processor> 

<!--###########  FPCCD tracking #################################    -->

<processor name="MyFPCCDSiliconTracking_MarlinTrk" type="FPCCDSiliconTracking_MarlinTrk">
   <!--Each ladder's FPCCD Pixel size(unit:mm)-->
   <parameter name="PixelSizeVec" type="float"> 0.016 0.064 0.040 0.040 0.040 </parameter>
   <!--AttachRemainingHitsForVXD-->
   <parameter name="AttachRemainingHitsForVXD" type="int"> 2 </parameter>
  <!--parameter name="LayerCombinations" type="IntVec"> 
    5 3 1  5 3 0  5 2 1  5 2 0
    4 3 1  4 3 0  4 2 1  4 2 0    
  </parameter-->
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <parameter name="Verbosity" type="string"> MESSAGE </parameter>
</processor>

<!--###########  FULL LDC tracking #################################    -->

  <processor name="MyFPCCDFullLDCTracking_MarlinTrk" type="FPCCDFullLDCTracking_MarlinTrk">
   <!--VTX Hit Collection Name-->
   <parameter name="VTXHitCollection" type="string" lcioInType="TrackerHitPlane"> VXDTrackerHits </parameter>
   <!--SIT Hit Collection Name-->
   <parameter name="SITHitCollection" type="string" lcioInType="TrackerHit"> SITSpacePoints </parameter>
   <!--SET Hit Collection Name-->
   <parameter name="SETHitCollection" type="string" lcioInType="TrackerHit"> SETSpacePoints </parameter>
   <!--TPC Track Collection-->
   <parameter name="TPCTracks" type="string" lcioInType="Track"> ClupatraTracks </parameter>
   <!--TPC Track to MCP Relation Collection Name-->
   <parameter name="TPCTracksMCPRelColl" type="string" lcioInType="LCRelation">  </parameter>
   <!--LDC track collection name-->
   <parameter name="LDCTrackCollection" type="string" lcioOutType="Track"> MarlinTrkTracks </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <parameter name="Verbosity" type="string"> MESSAGE </parameter>
  </processor>


<processor name="MyTrackSubsetProcessor" type="TrackSubsetProcessor">
   <!--TrackSubsetProcessor takes tracks from multiple sources and outputs them (or modified versions, or a subset of them) as one track collection.-->
   <!--Use Energy Loss in Fit-->
   <parameter name="EnergyLossOn" type="bool">true </parameter>
   <!--Use MultipleScattering in Fit-->
   <parameter name="MultipleScatteringOn" type="bool">true </parameter>
   <!--The parameter omega for the HNN. Controls the influence of the quality indicator.-->
   <parameter name="Omega" type="double">0.75 </parameter>
   <!--Smooth All Measurement Sites in Fit-->
   <parameter name="SmoothOn" type="bool">false </parameter>
   <!--A vector of the input track collections-->
   <parameter name="TrackInputCollections" type="StringVec">ForwardTracks SiTracks  </parameter>
   <!--Name of the output track collection-->
   <parameter name="TrackOutputCollection" type="string" lcioOutType="Track">SubsetTracks </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
</processor>
  
<processor name="MyFullLDCTracking_MarlinTrk" type="FullLDCTracking_MarlinTrk">
 <!--Performs full tracking in ILD detector-->
  <!--Cut on Opening Angle for forced merging of Si and TPC segments-->
  <parameter name="AngleCutForForcedMerging" type="float">0.05 </parameter>
  <!--Cut on Opening Angle for merging Si and TPC segments-->
  <parameter name="AngleCutForMerging" type="float">0.1 </parameter>
  <!--Assign ETD Hits-->
  <parameter name="AssignETDHits" type="int">0 </parameter>
  <!--Assign left over FTD hits-->
  <parameter name="AssignFTDHits" type="int">1 </parameter>
  <!--Assign SET Hits-->
  <parameter name="AssignSETHits" type="int"> 1 </parameter>
  <!--Assign left over SIT hits-->
  <parameter name="AssignSITHits" type="int">1 </parameter>
  <!--Assign left over TPC hits-->
  <parameter name="AssignTPCHits" type="int">0 </parameter>
  <!--Assign left over VTX hits-->
  <parameter name="AssignVTXHits" type="int">1 </parameter>
  <!--Cut on fit Chi2-->
  <parameter name="Chi2FitCut" type="float">100 </parameter>
  <!--Cut on the number of the Si hits for tracks with no TPC hits-->
  <parameter name="CutOnSiHits" type="int">4 </parameter>
  <!--Cut on the number of the TPC hits for tracks with no Si hits-->
  <parameter name="CutOnTPCHits" type="int">10 </parameter>
  <!--Cut on the track parameter D0-->
  <parameter name="CutOnTrackD0" type="float">500 </parameter>
  <!--Cut on the track parameter Z0-->
  <parameter name="CutOnTrackZ0" type="float">500 </parameter>
  <!--Cut on D0 difference for forced merging of Si and TPC segments-->
  <parameter name="D0CutForForcedMerging" type="float">50 </parameter>
  <!--Cut on D0 difference for merging of Si and TPC segments-->
  <parameter name="D0CutForMerging" type="float">500 </parameter>
  <!--Cut on D0 difference for merging TPC segments-->
  <parameter name="D0CutToMergeTPCSegments" type="float">100 </parameter>
  <!--Activate debugging?-->
  <parameter name="Debug" type="int">0 </parameter>
  <!--Cut on dP/P difference for merging TPC segments-->
  <parameter name="DeltaPCutToMergeTPCSegments" type="float">0.1 </parameter>
  <!--Use Energy Loss in Fit-->
  <parameter name="EnergyLossOn" type="bool"> true </parameter>
  <!--Cut on distance between track and FTD hits-->
  <parameter name="FTDHitToTrackDistance" type="float">2 </parameter>
 <!--FTD Pixel Hit Collection Name-->
  <parameter name="FTDPixelHitCollectionName" type="string" lcioInType="TrackerHitPlane"> FTDPixelTrackerHits </parameter>
  <!--FTD FTDSpacePoint Collection Name-->
  <parameter name="FTDSpacePointCollection" type="string" lcioInType="TrackerHit"> FTDSpacePoints </parameter>
  <!--Forbid overlap in Z for combining TPC segments with tracks having Si hits-->
  <parameter name="ForbidOverlapInZComb" type="int">0 </parameter>
  <!--Forbid overlap in Z for the merged TPC segments-->
  <parameter name="ForbidOverlapInZTPC" type="int">0 </parameter>
  <!--Force merging of Si and TPC segments?-->
  <parameter name="ForceSiTPCMerging" type="int">0 </parameter>
  <!--Force merging of TPC Segments?-->
  <parameter name="ForceTPCSegmentsMerging" type="int"> 0 </parameter>
  <!--Value used for the initial d0 variance of the trackfit-->
  <parameter name="InitialTrackErrorD0" type="float">1e+06 </parameter>
  <!--Value used for the initial omega variance of the trackfit-->
  <parameter name="InitialTrackErrorOmega" type="float">0.0001 </parameter>
  <!--Value used for the initial phi0 variance of the trackfit-->
  <parameter name="InitialTrackErrorPhi0" type="float">100 </parameter>
  <!--Value used for the initial tanL variance of the trackfit-->
  <parameter name="InitialTrackErrorTanL" type="float">100 </parameter>
  <!--Value used for the initial z0 variance of the trackfit-->
  <parameter name="InitialTrackErrorZ0" type="float">1e+06 </parameter>
  <!--LDC track collection name-->
  <parameter name="LDCTrackCollection" type="string" lcioOutType="Track">MarlinTrkTracks </parameter>
  <!--Maximum Chi-squared value allowed when assigning a hit to a track-->
  <parameter name="MaxChi2PerHit" type="double">100 </parameter>
  <!--Use MultipleScattering in Fit-->
  <parameter name="MultipleScatteringOn" type="bool"> true </parameter>
  <!--number of hits for outward extrapolation-->
  <parameter name="NHitsExtrapolation" type="int">35 </parameter>
  <!--Cut on Omega difference for forced merging of Si and TPC segments-->
  <parameter name="OmegaCutForForcedMerging" type="float">0.15 </parameter>
  <!--Cut on Omega difference for merging Si and TPC segments-->
  <parameter name="OmegaCutForMerging" type="float">0.25 </parameter>
  <!--Cut on Pt of tracks for merging TPC segments-->
  <parameter name="PtCutToMergeTPCSegments" type="float">1.2 </parameter>
  <!--Run MarlinTrk Diagnostics. MarlinTrk must be compiled with MARLINTRK_DIAGNOSTICS_ON defined-->
  <parameter name="RunMarlinTrkDiagnostics" type="bool">false </parameter>
  <!--SET Hit Collection Name-->
  <parameter name="SETHitCollection" type="string" lcioInType="TrackerHit">SETSpacePoints </parameter>
  <!--Cut on distance between track and SET hits-->
  <parameter name="SETHitToTrackDistance" type="float">50 </parameter>
  <!--SIT Hit Collection Name-->
  <parameter name="SITHitCollection" type="string" lcioInType="TrackerHit">SITSpacePoints </parameter>
  <!--Cut on distance between track and SIT hits-->
  <parameter name="SITHitToTrackDistance" type="float">2 </parameter>
  <!--Si Track Collection-->
  <parameter name="SiTracks" type="string" lcioInType="Track">SubsetTracks </parameter>
  <!--Si Track to Collection-->
  <parameter name="SiTracksMCPRelColl" type="string" lcioInType="LCRelation">SubsetTracksMCTruthLink </parameter>
 <!--Smooth All Mesurement Sites in Fit-->
  <parameter name="SmoothOn" type="bool">true </parameter>
  <!--TPC Hit Collection Name-->
  <parameter name="TPCHitCollection" type="string" lcioInType="TrackerHit">TPCTrackerHits </parameter>
  <!--Cut on distance between track and TPC hits-->
  <parameter name="TPCHitToTrackDistance" type="float">15 </parameter>
  <!--TPC Track Collection-->
  <parameter name="TPCTracks" type="string" lcioInType="Track">ClupatraTracks </parameter>
  <!--TPC Track to MCP Relation Collection Name-->
  <parameter name="TPCTracksMCPRelColl" type="string" lcioInType="LCRelation">TPCTracksMCTruthLink </parameter>
  <!--VTX Hit Collection Name-->
  <parameter name="VTXHitCollection" type="string" lcioInType="TrackerHit">VXDTrackerHits </parameter>
  <!--Cut on distance between track and VTX hits-->
  <parameter name="VTXHitToTrackDistance" type="float">1.5 </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
  <!--Cut on Z0 difference for forced merging of Si and TPC segments-->
  <parameter name="Z0CutForForcedMerging" type="float">200 </parameter>
  <!--Cut on Z0 difference for merging of Si and TPC segments-->
  <parameter name="Z0CutForMerging" type="float">1000 </parameter>
  <!--Cut on Z0 difference for merging TPC segments-->
  <parameter name="Z0CutToMergeTPCSegments" type="float">5000 </parameter>
  <!--Cut on cos theta between the two momentum vectors when considering merger of high Pt tracks-->
  <parameter name="cosThetaCutHighPtMerge" type="float">0.99 </parameter>
  <!--cut on cos theta between the two momentum vectors when considering merger of high Pt tracks for softer dp/p cut-->
  <parameter name="cosThetaCutSoftHighPtMerge" type="float">0.998 </parameter>
  <!--cut on 3D distance between hit and helix extrapolation when considering merger of high Pt tracks-->
  <parameter name="hitDistanceCutHighPtMerge" type="float">25 </parameter>
  <!--cut on maximum fraction of outliers when considering merger of high Pt tracks-->
  <parameter name="maxFractionOfOutliersCutHighPtMerge" type="float">0.95 </parameter>
  <!--cut for max 3D distance between any hit and helix extrapolation when considering merger of high Pt tracks-->
  <parameter name="maxHitDistanceCutHighPtMerge" type="float">50 </parameter>
  <!--cut on dp/p when considering merger of high Pt tracks-->
  <parameter name="momDiffCutHighPtMerge" type="float">0.01 </parameter>
  <!--softer cut on dp/p when considering merger of high Pt tracks-->
  <parameter name="momDiffCutSoftHighPtMerge" type="float">0.25 </parameter>
</processor>

<!--  dedx calculation processor -->
<processor name="MyCompute_dEdxProcessor" type="Compute_dEdxProcessor">
  <!--Energy Loss Error for TPC-->
  <parameter name="EnergyLossErrorTPC" type="float">0.05 </parameter>
  <!--LDC Track collectoin name-->
  <parameter name="LDCTrackCollection" type="string"> MarlinTrkTracks </parameter>
</processor>

<processor name="MyForwardTracking" type="ForwardTracking">
   <!--ForwardTracking reconstructs tracks through the FTDs-->
   <!--Name of the Forward Tracking output collection-->
   <parameter name="ForwardTrackCollection" type="string" lcioOutType="Track">ForwardTracks </parameter>
   <!--Use Energy Loss in Fit-->
   <parameter name="EnergyLossOn" type="bool">true </parameter>
   <!--FTD Hit Collections-->
   <parameter name="FTDHitCollections" type="StringVec">FTDPixelTrackerHits FTDSpacePoints</parameter>
   <!--Use MultipleScattering in Fit-->
   <parameter name="MultipleScatteringOn" type="bool">true </parameter>
   <!--Smooth All Measurement Sites in Fit-->
   <parameter name="SmoothOn" type="bool">false </parameter>
   <!--The chi2 probability value below which tracks will be cut-->
   <parameter name="Chi2ProbCut" type="double">0.0 </parameter>
   <!--the maximum chi2/Ndf that is allowed as result of a helix fit-->
   <parameter name="HelixFitMax" type="double">500 </parameter>
   <!--The maximum distance of overlapping hits-->
   <parameter name="OverlappingHitsDistMax" type="double">3.5 </parameter>
   <!--The minimum number of hits to create a track-->
   <parameter name="HitsPerTrackMin" type="int">3 </parameter>
   <!--The method used to find the best non overlapping subset of tracks. Available are: SubsetHopfieldNN and SubsetSimple-->
   <parameter name="BestSubsetFinder" type="string">SubsetSimple </parameter>
   <!--Whether when adding hits to a track only the track with highest quality should be further processed-->
   <parameter name="TakeBestVersionOfTrack" type="bool">true </parameter>
   <!--If the automaton has more connections than this it will be redone with the next parameters-->
   <parameter name="MaxConnectionsAutomaton" type="int">100000 </parameter>
   <!--Maximal number of hits allowed on a sector-->
   <parameter name="MaxHitsPerSector" type="int">1000 </parameter>
   
   <parameter name="Crit2_DeltaPhi_min" type="float">0 0</parameter>
   <parameter name="Crit2_DeltaPhi_max" type="float">30 0.8</parameter>
   <parameter name="Crit2_DeltaRho_min" type="float">20</parameter>
   <parameter name="Crit2_DeltaRho_max" type="float">150</parameter>
   <parameter name="Crit2_RZRatio_min" type="float">1.002</parameter>
   <parameter name="Crit2_RZRatio_max" type="float">1.08</parameter>
   <parameter name="Crit2_StraightTrackRatio_min" type="float">0.9 0.99</parameter>
   <parameter name="Crit2_StraightTrackRatio_max" type="float">1.02 1.01</parameter>
   
   <parameter name="Crit3_3DAngle_min" type="float">0 0</parameter>
   <parameter name="Crit3_3DAngle_max" type="float">10 0.35</parameter>
   <parameter name="Crit3_ChangeRZRatio_min" type="float">0.995 0.999</parameter>
   <parameter name="Crit3_ChangeRZRatio_max" type="float">1.015 1.001</parameter>
   <parameter name="Crit3_IPCircleDist_min" type="float">0 0</parameter>
   <parameter name="Crit3_IPCircleDist_max" type="float">20 1.5</parameter>
   <parameter name="Crit3_PT_min" type="float">0.1</parameter>
   <parameter name="Crit3_PT_max" type="float">99999999</parameter>
   
   <parameter name="Crit4_3DAngleChange_min" type="float">0.8 0.99</parameter>
   <parameter name="Crit4_3DAngleChange_max" type="float">1.3 1.01</parameter>
   <parameter name="Crit4_DistToExtrapolation_min" type="float">0 0</parameter>
   <parameter name="Crit4_DistToExtrapolation_max" type="float">1.0 0.05</parameter>
   
   <parameter name="Criteria" type="StringVec">
      Crit2_DeltaPhi
      Crit2_DeltaRho
      Crit2_RZRatio
      Crit2_StraightTrackRatio
      
      Crit3_3DAngle
      Crit3_ChangeRZRatio
      Crit3_IPCircleDist
      Crit3_PT
      
      Crit4_DistToExtrapolation
      Crit4_3DAngleChange
   </parameter>
   
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
   
</processor> 

<processor name="MyTruthTracker" type="TruthTracker">
  <!--Creates Track Collection from MC Truth. Can handle composite spacepoints as long as they consist of two TrackerHits-->
  <!--Use Energy Loss in Fit-->
  <parameter name="EnergyLossOn" type="bool">true </parameter>
  <!--Fit the Tracks with MarlinTrk, otherwise take track parameters from MCParticle-->
  <parameter name="FitTracksWithMarlinTrk" type="bool">true </parameter>
  <!--Transverse Momentum Threshold MC particles which will produce tracks GeV-->
  <parameter name="MCpThreshold" type="float">0.1 </parameter>
  <!--Use MultipleScattering in Fit-->
  <parameter name="MultipleScatteringOn" type="bool">true </parameter>
  <!--Name of the output track collection-->

  <!-- FIXME: for testing write out 'cheated' MarlinTrkTracks -->
  <parameter name="OutputTrackCollectionName" type="string" lcioOutType="Track"> TruthTracks </parameter>

  <!--Name of the MCParticle-Track Relations collection for output tracks-->
  <parameter name="OutputTrackRelCollection" type="string" lcioOutType="LCRelation">TruthTracksMCP </parameter>
  <!--Smooth All Mesurement Sites in Fit-->
  <parameter name="SmoothOn" type="bool"> true </parameter>
  <!--Name of the tracker hit input collections-->
  <parameter name="TrackerHitsInputCollections" type="StringVec" lcioInType="TrackerHit">VXDTrackerHits SITSpacePoints FTDPixelTrackerHits FTDSpacePoints TPCTrackerHits SETSpacePoints  </parameter>
  <!--Name of the lcrelation collections, that link the TrackerHits to their SimTrackerHits. Have to be in same order as TrackerHitsInputCollections!!!-->
  <parameter name="TrackerHitsRelInputCollections" type="StringVec" lcioInType="LCRelation">VXDTrackerHitRelations SITSpacePointRelations FTDPixelTrackerHitRelations FTDSpacePointRelations TPCTrackerHitRelations SETSpacePointRelations  </parameter>
  <!--Fit the Tracks with MarlinTrk using iterative approach. If 3 consecutive hits fail to be included then the  current fit is written out and a new fit started. Use instead of FitTracksWithMarlinTrk.-->
  <parameter name="UseIterativeFitting" type="bool">  true </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
</processor>

<!--########## KinkFinder ###################################### -->

<processor name="MyKinkFinder" type="KinkFinder">
  <parameter name="DebugPrinting" type="int"> 0</parameter>
  <parameter name="TrackCollection" type="string"> MarlinTrkTracks</parameter>
</processor>

<!--######  MyV0Finder ##########################################-->

<processor name="MyV0Finder" type="V0Finder">
  <parameter name="TrackCollection" type="string"> MarlinTrkTracks</parameter>
  <parameter name="MassRangeGamma"  type="float">  0.01 </parameter>
  <parameter name="MassRangeK0S"    type="float">  0.02 </parameter>
  <parameter name="MassRangeL0"     type="float">  0.02 </parameter>
</processor>

<!--######  ILDCaloDigi ##########################################-->

<!--
    Calibration constants in ILDCaloDigi determined using 100ns timing cuts in both the ECal 
    and HCal.  Realistic digitisation options are enabled for the ECal (Si) and HCal.  Timing 
    cuts and realistic digitisation options are specified in ILDCaloDigi, but impact the 
    calibration of MarlinPandora also.  If either the detector model changes or the 
    reconstruction parameters change you must recalibrate! 
-->

<processor name="MyILDCaloDigi" type="ILDCaloDigi">
  <!--ILD digitizer...-->
  <!--Calibration coefficients for ECAL-->
  <parameter name="CalibrECAL" type="FloatVec">42.9631192209 85.9262384418</parameter>
  <!--Calibration coefficients for HCAL barrel, endcap, other-->
  <parameter name="CalibrHCALBarrel" type="FloatVec">49.3344654494</parameter>
  <parameter name="CalibrHCALEndcap" type="FloatVec">55.3271575116</parameter>
  <parameter name="CalibrHCALOther" type="FloatVec">31.1454028868</parameter>
  <!--ECAL Collection Names-->
  <parameter name="ECALCollections" type="StringVec">EcalBarrelSiliconCollection EcalEndcapSiliconCollection  EcalEndcapRingCollection </parameter>
  <!--Index of ECal Layers-->
  <parameter name="ECALLayers" type="IntVec">20 100 </parameter>
  <!--Threshold for ECAL Hits in GeV-->
  <parameter name="ECALThreshold" type="float">5e-05 </parameter>
  <!--HCAL Collection Names-->
  <parameter name="HCALCollections" type="StringVec">HcalBarrelRegCollection  HcalEndCapsCollection HcalEndCapRingsCollection</parameter>
  <!--Index of HCal Layers-->
  <parameter name="HCALLayers" type="IntVec">100  </parameter>
  <!--Threshold for HCAL Hits in MIPs - given HCALThresholdUnit is specified-->
  <parameter name="HCALThreshold" type="float">0.5 </parameter>
  <!--Digital Ecal-->
  <parameter name="IfDigitalEcal" type="int">0 </parameter>
  <!--Digital Hcal-->
  <parameter name="IfDigitalHcal" type="int">0 </parameter>
  <!--name for the new collection -->
  <parameter name="ECALOutputCollection0" type="stringVec">ECALBarrel </parameter>
  <parameter name="ECALOutputCollection1" type="stringVec">ECALEndcap </parameter>
  <parameter name="ECALOutputCollection2" type="stringVec">ECALOther </parameter>
  <parameter name="HCALOutputCollection0" type="stringVec">HCALBarrel </parameter>
  <parameter name="HCALOutputCollection1" type="stringVec">HCALEndcap </parameter>
  <parameter name="HCALOutputCollection2" type="stringVec">HCALOther </parameter>
  <!--CaloHit Relation Collection-->
  <parameter name="RelationOutputCollection" type="string"> RelationCaloHit</parameter>
  <!--Gap Correction-->
  <parameter name="ECALGapCorrection" type="int"> 1 </parameter>
  <!--Gap Correction Fudge Factor-->
  <parameter name="ECALGapCorrectionFactor" type="float">1</parameter>
  <parameter name="ECALModuleGapCorrectionFactor" type="int"> 0.0 </parameter>
  <!-- Timing -->
  <parameter name="UseEcalTiming" type="int">1</parameter>
  <parameter name="UseHcalTiming" type="int">1</parameter>
  <parameter name="ECALBarrelTimeWindowMax" type="float">100.0</parameter>
  <parameter name="HCALBarrelTimeWindowMax" type="float">100.0</parameter>
  <parameter name="ECALEndcapTimeWindowMax" type="float">100.0</parameter>
  <parameter name="HCALEndcapTimeWindowMax" type="float">100.0</parameter>
  <parameter name="ECALTimeWindowMin" type="float"> -1.0 </parameter>
  <parameter name="HCALTimeWindowMin" type="float"> -1.0 </parameter>
  <parameter name="ECALCorrectTimesForPropagation" type="int">1</parameter>
  <parameter name="HCALCorrectTimesForPropagation" type="int">1</parameter>
  <parameter name="ECALDeltaTimeHitResolution" type="float"> 20.0 </parameter>
  <parameter name="HCALDeltaTimeHitResolution" type="float"> 20.0 </parameter>
  <!-- Realistic ECal -->
  <parameter name="ECAL_apply_realistic_digi" type="int">1</parameter>
  <parameter name="CalibECALMIP" type="float">0.0001475</parameter>
  <parameter name="ECAL_maxDynamicRange_MIP" type="float">2500</parameter>
  <parameter name="ECAL_elec_noise_mips" type="float">0.07</parameter>
  <parameter name="ECAL_deadCellRate" type="float">0</parameter>
  <parameter name="ECAL_miscalibration_uncorrel" type="float">0</parameter>
  <parameter name="ECAL_miscalibration_uncorrel_memorise" type="bool">false</parameter>
  <parameter name="ECAL_miscalibration_correl" type="float">0</parameter>
  <parameter name="energyPerEHpair" type="float">3.6</parameter>
  <parameter name="ECAL_PPD_PE_per_MIP" type="float">7</parameter>
  <parameter name="ECAL_PPD_N_Pixels" type="int">10000</parameter>
  <parameter name="ECAL_PPD_N_Pixels_uncertainty" type="float">0.05</parameter>
  <parameter name="ECAL_pixel_spread" type="float">0.05</parameter>
  <!-- Realistic HCal -->
  <parameter name="HCAL_apply_realistic_digi" type="int">1</parameter>
  <parameter name="HCALThresholdUnit" type="string">MIP</parameter>
  <parameter name="CalibHCALMIP" type="float">0.0004925</parameter>
  <parameter name="HCAL_maxDynamicRange_MIP" type="float">99999999</parameter>
  <parameter name="HCAL_elec_noise_mips" type="float">0.06</parameter>
  <parameter name="HCAL_deadCellRate" type="float">0</parameter>
  <parameter name="HCAL_PPD_N_Pixels" type="int">2000</parameter>
  <parameter name="HCAL_PPD_PE_per_MIP" type="float">15</parameter>
  <parameter name="HCAL_pixel_spread" type="float">0.05</parameter>
  <parameter name="HCAL_PPD_N_Pixels_uncertainty" type="float">0</parameter>
  <parameter name="HCAL_miscalibration_uncorrel" type="float">0</parameter>
  <parameter name="HCAL_miscalibration_correl" type="float">0</parameter>
  <!-- Histograms-->
  <parameter name="Histograms" type="int"> 0 </parameter>
</processor>

<!--######  SimpleBCALDigi ##########################################-->

<!--  <processor name="MySimpleBCalDigi" type="SimpleFCalDigi"> -->
<!--  <!-\-Performs simple digitization of sim calo hits...-\-> -->
<!--    <!-\-Calibration coefficients for LCAL-\-> -->
<!--    <parameter name="CalibrLCAL" type="FloatVec">1.</parameter> -->
<!--    <!-\-LCAL Collection Names-\-> -->
<!--    <parameter name="LCALCollections" type="StringVec">BeamCalCollection</parameter> -->
<!--    <!-\-LCAL Collection of real Hits-\-> -->
<!--    <parameter name="LCALOutputCollection" type="string">BCAL</parameter> -->
<!--    <!-\-Threshold for LCAL Hits in GeV-\-> -->
<!--    <parameter name="LCALThreshold" type="float">1e-06 </parameter> -->
<!--    <!-\-BCalHit Relation Collection-\-> -->
<!--    <parameter name="RelationOutputCollection" type="string">RelationBCalHit </parameter> -->
<!-- </processor> -->

<processor name="MySimpleBCalDigi" type="SimpleFCalDigi">
   <!--Performs simple digitization of sim calo hits...-->
   <!--Calibration coefficients for BCAL-->
   <parameter name="CalibrFCAL" type="FloatVec">1.</parameter>
   <!--BCAL Collection Name-->
   <parameter name="FCALCollections" type="StringVec"> BeamCalCollection</parameter>
   <!--BCAL Collection of real Hits-->
   <parameter name="FCALOutputCollection" type="string">BCAL </parameter>
   <!--Threshold for BCAL Hits in GeV-->
   <parameter name="FcalThreshold" type="float"> 1e-06 </parameter>
   <!--LHCALHit Relation Collection-->
   <parameter name="RelationOutputCollection" type="string">RelationBCalHit </parameter>
   <!-- Fix the hit positions in LCal using the cellID (for DBD simulated samples) -->
   <parameter name="FixLCalHits" type="bool"> false </parameter>
   <!-- type of calorimeter: em, had, muon -->
   <parameter name="CaloType" type="string"> em </parameter>
   <!--parameter name="CaloType" type="int"> 0 </parameter-->
   <!-- ID of calorimeter: lcal, lhcal, bcal -->
   <parameter name="CaloID" type="string"> bcal </parameter>
   <!-- subdetector layout: barrel, endcap, plug, ring -->
   <parameter name="CaloLayout" type="string"> endcap </parameter>
   <!-- string defining cell encoding -->
   <parameter name="DefaultEncoding" type="string"> "I:10,J:10,K:10,S-1:2" </parameter>
   <!-- name of the part of the cellID that holds the layer -->
   <parameter name="CellIDLayerString" type="string"> K </parameter>
</processor>

<!--######  SimpleLCalDigi ##########################################-->

<!-- <processor name="MySimpleLCalDigi" type="SimpleLCalDigi"> -->
<!--   <!-\-Performs simple digitization of sim calo hits...-\-> -->
<!--   <!-\-Calibration coefficients for LCAL-\-> -->
<!--   <parameter name="CalibrLCAL" type="FloatVec">89.0</parameter> -->
<!--   <!-\-LCAL Collection Names-\-> -->
<!--   <parameter name="LCALCollections" type="StringVec"> LumiCalCollection  </parameter> -->
<!--   <!-\-LCAL Collection of real Hits-\-> -->
<!--   <parameter name="LCALOutputCollection" type="string">LCAL </parameter> -->
<!--   <!-\-Threshold for LCALHits in GeV-\-> -->
<!--  <parameter name="LCALThreshold" type="float">0e-04 </parameter> -->
<!--   <!-\-LCALHit Relation Collection-\-> -->
<!--   <parameter name="RelationOutputCollection" type="string">RelationLcalHit </parameter> -->
<!-- </processor> -->

<processor name="MySimpleLCalDigi" type="SimpleFCalDigi">
<!--Performs simple digitization of sim calo hits...-->
  <!--Calibration coefficients for LCAL-->
  <parameter name="CalibrFCAL" type="FloatVec">89.0</parameter>
  <!--LCAL Collection Name-->
  <parameter name="FCALCollections" type="StringVec"> LumiCalCollection</parameter>
  <!--LCAL Collection of real Hits-->
  <parameter name="FCALOutputCollection" type="string">LCAL </parameter>
  <!--Threshold for LCAL Hits in GeV-->
  <parameter name="FcalThreshold" type="float"> 0e-04 </parameter>
  <!--LHCALHit Relation Collection-->
  <parameter name="RelationOutputCollection" type="string">RelationLcalHit </parameter>
  <!-- Fix the hit positions in LCal using the cellID (for DBD simulated samples) -->
  <parameter name="FixLCalHits" type="bool"> false </parameter>
  <!-- type of calorimeter: em, had, muon -->
  <parameter name="CaloType" type="string"> em </parameter>
  <!--parameter name="CaloType" type="int"> 0 </parameter-->
  <!-- ID of calorimeter: lcal, lhcal, bcal -->
  <parameter name="CaloID" type="string"> lcal </parameter>
  <!-- subdetector layout: barrel, endcap, plug, ring -->
  <parameter name="CaloLayout" type="string"> endcap </parameter>
  <!-- string defining cell encoding -->
  <parameter name="DefaultEncoding" type="string"> "I:10,J:10,K:10,S-1:2" </parameter>
  <!-- name of the part of the cellID that holds the layer -->
  <parameter name="CellIDLayerString" type="string"> K </parameter>
</processor>

	 				  
<!--######  SimpleLHCALDigi ##########################################-->

<processor name="MySimpleLHCalDigi" type="SimpleFCalDigi">
<!--Performs simple digitization of sim calo hits...-->
   <!--Calibration coefficients for LHCAL-->
   <parameter name="CalibrFCAL" type="FloatVec">150</parameter>
   <!--LHCAL Collection Names-->
   <parameter name="FCALCollections" type="StringVec"> LHcalCollection</parameter>
   <!--LHCAL Collection of real Hits-->
   <parameter name="FCALOutputCollection" type="string">LHCAL </parameter>
   <!--Threshold for LHCAL Hits in GeV-->
   <parameter name="FcalThreshold" type="float">1e-06 </parameter>
   <!--LHCALHit Relation Collection-->
   <parameter name="RelationOutputCollection" type="string">RelationLHcalHit </parameter>
   <!-- Fix the hit positions in LCal using the cellID (for DBD simulated samples) -->
   <parameter name="FixLCalHits" type="bool"> false </parameter>
   <!-- type of calorimeter: em, had, muon -->
   <parameter name="CaloType" type="string"> had </parameter>
   <!--parameter name="CaloType" type="int"> 1 </parameter-->
   <!-- ID of calorimeter: lcal, lhcal, bcal -->
   <parameter name="CaloID" type="string"> lhcal </parameter>
   <!-- subdetector layout: barrel, endcap, plug, ring -->
   <parameter name="CaloLayout" type="string"> endcap </parameter>
   <!-- string defining cell encoding -->
   <parameter name="DefaultEncoding" type="string"> M:3,S-1:3,I:9,J:9,K-1:6 </parameter>
   <!-- name of the part of the cellID that holds the layer -->
   <parameter name="CellIDLayerString" type="string"> K-1 </parameter>
</processor>

<!--######  SimpleMuonDigi ##########################################-->

<processor name="MySimpleMuonDigi" type="SimpleMuonDigi">
<!--Performs simple digitization of sim calo hits...-->
   <!--Calibration coefficients for MUON-->
   <parameter name="CalibrMUON" type="FloatVec">56.7</parameter>
   <!-- maximum hit energy for a MUON hit -->
   <parameter name="MaxHitEnergyMUON" type="float">2.0</parameter>
   <!--MUON Collection Names-->
   <parameter name="MUONCollections" type="StringVec">
   MuonBarrelCollection MuonEndCapCollection</parameter>
   <!--MUON Collection of real Hits-->
   <parameter name="MUONOutputCollection" type="string">MUON </parameter>
   <!--Threshold for MUON Hits in GeV-->
   <parameter name="MUONThreshold" type="float">1e-06 </parameter>
   <!--MuonHit Relation Collection-->
   <parameter name="RelationOutputCollection" type="string">RelationMuonHit </parameter>
</processor>

<!--########## GARLIC ###################################### -->

 <processor name="MyECALPreClustering" type="ECALPreClustering">
 <!--Preclusters ECAL hits to define ROIs for Garlic-->
  <!--Debugging level 0-3-->
  <parameter name="Debug" type="int">0 </parameter>
  <!--Maximum distance of two hits grouped to the same PreCluster-->
  <parameter name="DistanceCut" type="float">40 </parameter>
  <!--names of ECAL hit collections-->
  <parameter name="EcalHitCollections" type="StringVec">ECALEndcap ECALBarrel ECALOther  </parameter>
  <!--Collecion name of the ECAL preClusrters-->
  <parameter name="EcalPreClusterCollection" type="string">ECAL_PreClusters </parameter>
  <!--Minimum number of hits to accept a PreCluster-->
  <parameter name="MinimumHits" type="int">5 </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
</processor>




 <processor name="MyGarlicProcessor" type="GarlicProcessor">
 <!--Clustering and photon recognition-->

  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->

  <!--Talk a lot? (0-3)-->
  <parameter name="DebugMode" type="int">0 </parameter>

<!-- input collections -->

  <!--Name of PreCluster collection-->
  <parameter name="EcalPreClusterCollection" type="string" lcioInType="Cluster">ECAL_PreClusters </parameter>
  <!--Name of the MCParticle input collection-->
  <parameter name="MCParticleCollection" type="string" lcioInType="MCParticle">MCParticle </parameter>
  <!--TPC track collection name-->
  <parameter name="TPCTrackCollection" type="string" lcioInType="Track">ClupatraTracks </parameter>
  <!--track collection name-->
  <parameter name="TrackCollection" type="string" lcioInType="Track">MarlinTrkTracks </parameter>
  <!--name of sim->calo hit relation collection-->
  <parameter name="simHitCaloHitRelations" type="string" lcioInType="LCRelation">RelationCaloHit </parameter>

<!-- output collections -->

  <!--write out debug info collections to lcio file?-->
  <parameter name="GarlicDebugCollections" type="bool">false </parameter>

  <!--Name of garlic cluster collection-->
  <parameter name="ClusterCollName" type="string" lcioOutType="Cluster">GARLICPhotonClusters </parameter>
  <!--Name of cluster to parameter relations-->
  <parameter name="ClusterParLinksCollName" type="string" lcioOutType="LCRelation">GARLICClusterParameterLinks </parameter>
  <!--Name of garlic cluster parameters collection-->
  <parameter name="ClusterParametersCollName" type="string" lcioOutType="LCGenericObject">GARLICClusterParameters </parameter>
  <!--Name of garlic core collection-->
  <parameter name="CoreCollName" type="string" lcioOutType="Cluster">GARLICCores </parameter>
  <!--Name of electron cluster collection-->
  <parameter name="ElectronClusterCollName" type="string" lcioOutType="Cluster">GARLICElectronClusters </parameter>
  <!--collection of identified conversions-->
  <parameter name="GarlicConversionsPFOColName" type="string" lcioOutType="ReconstructedParticle">GARLICConversionPFOs </parameter>
  <!--collection of identified electrons-->
  <parameter name="GarlicElectronsPFOColName" type="string" lcioOutType="ReconstructedParticle">GARLICElectronPFOs </parameter>
  <!--collection of photon PFOs-->
  <parameter name="GarlicPhotonsPFOColName" type="string" lcioOutType="ReconstructedParticle">GARLICPhotonPFOs </parameter>
  <!--collection name of removed hits (near tracks)-->
  <parameter name="RemovedHitsCollection" type="string" lcioOutType="CalorimeterHit">GARLICRemovedHits </parameter>
  <!--Name of seed to cluster relations-->
  <parameter name="SeedClusterLinksCollName" type="string" lcioOutType="LCRelation">GARLICSeedClusterLinks </parameter>
  <!--Name of garlic seed collection-->
  <parameter name="SeedCollName" type="string" lcioOutType="CalorimeterHit">GARLICSeeds </parameter>
  <!--Name of seed to core relations-->
  <parameter name="SeedCoreLinksCollName" type="string" lcioOutType="LCRelation">GARLICSeedCoreLinks </parameter>
  <!--Name of track extrapolation collection-->
  <parameter name="TrackExtrapolationCollName" type="string" lcioOutType="CalorimeterHit">GARLICTrackExtrapolations </parameter>

  <!--name of file in which to save clustering histograms-->
  <parameter name="clusterCheckHistoFile" type="string"> </parameter>

<!-- parameters -->

  <!--factor to convert between ECAL hit energy and MIP scale, for first layer-->
  <parameter name="EcalEnergyMipConversion" type="float">140 </parameter>
  <!--Tracks with polar angle below this have less stringent cuts for electron finding (rad)-->
  <parameter name="ForwardTrackAngle" type="float">0.15 </parameter>

  <!--assumed constant term of energy resolution-->
  <parameter name="constantTerm" type="float">0.01 </parameter>
  <!--assumed stochastic term of energy resolution-->
  <parameter name="stochasticTerm" type="float">0.17 </parameter>
  <!--assumed Moliere radius of ECAL (mm)-->
  <parameter name="MoliereRadius" type="float">20 </parameter>

  <!--file containing the photon selection cuts-->
  <parameter name="PhotonCutFile" type="string"> garlicCuts_v1.txt </parameter>

  <!--take MC info for tracks?-->
  <parameter name="TrackCheat" type="bool">false </parameter>

  <!--Should remove Hits near extrapolated tracks to reject pions?-->
  <parameter name="TrackRemoveNearbyHits" type="bool">true </parameter>
  <!--window around track in which to remove hits (mm)-->
  <parameter name="TrackVetoWindow" type="float">10 </parameter>

  <!--radius of seed cylinder (in terms of cell size)-->
  <parameter name="SeedMaxDistance" type="float">1.5 </parameter>
  <!--reject seeds below this energy (in MIPs)-->
  <parameter name="SeedMinEnergy" type="float">5 </parameter>
  <!--consider only hits above this threshold (in MIPs) in the seeding-->
  <parameter name="SeedMinHitEnergy" type="float">2.5 </parameter>
  <!--Minimum number of hits to accept a seed.-->
  <parameter name="SeedMinHits" type="int">2 </parameter>
  <!--Number of ECAL pseudo layers used for projecting to obtain a seed, typically equivalent to 5 X0.-->
  <parameter name="SeedNLayers" type="int">12 </parameter>

  <!--max transverse distance for adding hits to core (in terms of cell size)-->
  <parameter name="CoreMaxDistance" type="float">1.5 </parameter>
  <!--max hole in core building for section 1-->
  <parameter name="CoreMaxHoleSection1" type="int">3 </parameter>
  <!--max hole in core building for section 2-->
  <parameter name="CoreMaxHoleSection2" type="int">2 </parameter>
  <!--first calo section definition for core building-->
  <parameter name="CoreNlayersSection1" type="int">16 </parameter>

  <!--Maximum distance from core to added hits (in Moliere Radii)-->
  <parameter name="ClusterMaxDist" type="float">2 </parameter>
  <!--maximum distance between 2 cluster COGs to consider merging them (int terms of Moliere Radii)-->
  <parameter name="MaxMergeDist" type="float">2 </parameter>

</processor>

<!--########## MarlinPandora ###################################### -->

<!--
    Calibration constants in MarlinPandora are determined using 100ns timing cuts in both the ECal
    and HCal, realistic digitisation options in the ECal (Si) and HCal and a 1 GeV hadronic energy 
    truncation for HCal cells (post digitisation).  Timing cuts and realistic digitisation options 
    are specified in ILDCaloDigi and the hadronic energy truncation is specified in MarlinPandora. 
    If either the detector model changes or the reconstruction parameters change you must recalibrate!
-->

<processor name="MyMarlinPandora" type="PandoraPFANewProcessor">
  <!--============= default Pandora (now with Bono's photon finder) ===================== -->
  <parameter name="PandoraSettingsXmlFile" type="String">PandoraSettingsDefault.xml</parameter>
  <!--============= with photons from Garlic - this does not work yet! ===================== -->
  <!--parameter name="PandoraSettingsXmlFile" type="String"> PandoraSettingsGarlic.xml </parameter-->
  <!-- Collection names -->
  <parameter name="TrackCollections" type="StringVec">MarlinTrkTracks</parameter>
  <parameter name="ECalCaloHitCollections" type="StringVec">ECALBarrel ECALEndcap ECALOther</parameter>
  <parameter name="HCalCaloHitCollections" type="StringVec">HCALBarrel HCALEndcap HCALOther</parameter>
  <parameter name="LCalCaloHitCollections" type="StringVec">LCAL</parameter>
  <parameter name="LHCalCaloHitCollections" type="StringVec">LHCAL</parameter>
  <parameter name="MuonCaloHitCollections" type="StringVec">MUON</parameter>
  <parameter name="MCParticleCollections" type="StringVec">MCParticle</parameter>
  <parameter name="RelCaloHitCollections" type="StringVec">RelationCaloHit RelationMuonHit</parameter>
  <parameter name="RelTrackCollections" type="StringVec">MarlinTrkTracksMCTruthLink</parameter>
  <parameter name="KinkVertexCollections" type="StringVec">KinkVertices</parameter>
  <parameter name="ProngVertexCollections" type="StringVec">ProngVertices</parameter>
  <parameter name="SplitVertexCollections" type="StringVec">SplitVertices</parameter>
  <parameter name="V0VertexCollections" type="StringVec">V0Vertices</parameter>
  <parameter name="ClusterCollectionName" type="String">PandoraClusters</parameter>
  <parameter name="PFOCollectionName" type="String">PandoraPFOs</parameter>
  <parameter name="StartVertexCollectionName" type="String">StartVertices</parameter>
  <!-- Calibration constants -->
  <parameter name="ECalToMipCalibration" type="float">153.846</parameter>
  <parameter name="HCalToMipCalibration" type="float">38.0228</parameter>
  <parameter name="ECalMipThreshold" type="float">0.5</parameter>
  <parameter name="HCalMipThreshold" type="float">0.3</parameter>
  <parameter name="ECalToEMGeVCalibration" type="float">1.00356141304</parameter>
  <parameter name="HCalToEMGeVCalibration" type="float">1.12083052744</parameter>
  <parameter name="ECalToHadGeVCalibrationBarrel" type="float">1.14127910463</parameter>
  <parameter name="ECalToHadGeVCalibrationEndCap" type="float">1.14127910463</parameter>
  <parameter name="HCalToHadGeVCalibration" type="float">1.12083052744</parameter>
  <parameter name="MuonToMipCalibration" type="float">10.3093</parameter>
  <parameter name="DigitalMuonHits" type="int">0</parameter>
  <parameter name="MaxHCalHitHadronicEnergy" type="float">1.0</parameter>
  <parameter name="AbsorberRadLengthECal" type="float">0.2854</parameter>
  <parameter name="AbsorberIntLengthECal" type="float">0.0101</parameter>
  <parameter name="AbsorberRadLengthHCal" type="float">0.0569</parameter>
  <parameter name="AbsorberIntLengthHCal" type="float">0.0060</parameter>
  <parameter name="AbsorberRadLengthOther" type="float">0.0569</parameter>
  <parameter name="AbsorberIntLengthOther" type="float">0.0060</parameter>
  <!--Whether to calculate track states manually, rather than copy stored fitter values-->
  <parameter name="UseOldTrackStateCalculation" type="int">0 </parameter>
  <!--<parameter name="NEventsToSkip" type="int">0</parameter>-->
  <!--parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> MESSAGE DEBUG </parameter-->
</processor>

<!--########## PfoAnalysis ###################################### -->

<processor name="MyPfoAnalysis" type="PfoAnalysis">
  <!--PfoAnalysis analyses output of PandoraPFANew-->
  <!--Names of input pfo collection-->
  <parameter name="PfoCollection" type="string" lcioInType="ReconstructedParticle">PandoraPFOs </parameter>
  <!--Names of mc particle collection-->
  <parameter name="MCParticleCollection" type="string" lcioInType="MCParticle">MCParticle </parameter>
  <!--Set the debug print level-->
  <parameter name="Printing" type="int">0 </parameter>
  <!--Name of the output root file-->
  <parameter name="RootFile" type="string"> PfoAnalysis.root  </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
</processor>

<!--########## Add4MomCovMatrixCharged ###################################### -->
<!--Set the convariance matrix in (P,E) for all charged pfos in PandoraPFOs Collection-->
<processor name="MyAdd4MomCovMatrixCharged" type="Add4MomCovMatrixCharged">
  <!--Name of the PandoraPFOs collection-->
  <parameter name="InputPandoraPFOsCollection" type="String">PandoraPFOs</parameter>
  <!--Verbosity lower than MESSAGE4 will print out cov. matrix for each pfo-->
  <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> MESSAGE4 </parameter>
</processor>

<!--########## AddClusterProperties ###################################### -->
 <processor name="MyAddClusterProperties" type="AddClusterProperties">
  <parameter name="PFOCollectionName" type="string" lcioInType="ReconstructedParticle">PandoraPFOs </parameter>
  <parameter name="ClusterCollection" type="string" lcioInType="Cluster">PandoraClusters </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <parameter name="Verbosity" type="string">MESSAGE </parameter>
</processor>


<!--########## AddClusterProperties ###################################### -->
 <processor name="BCalAddClusterProperties" type="AddClusterProperties">
  <parameter name="PFOCollectionName" type="string" lcioInType="ReconstructedParticle"> BCalRecoParticle </parameter>
  <parameter name="ClusterCollection" type="string" lcioInType="Cluster"> BCalClusters </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <parameter name="Verbosity" type="string">MESSAGE </parameter>
</processor>


<!--################################################ -->
 <processor name="MyBeamCalClusterReco" type="BeamCalClusterReco">
   <!--BeamCalClusterReco takes a list of beamcal background files from the ReadBeamCalprocessor, adds NumberOfBX of them together and puts the signal hits from thelcio input file on top of that, and then clustering is attempted.-->
   <!--Name of BeamCal Collection-->
   <parameter name="BeamCalCollectionName" type="string" lcioInType="SimCalorimeterHit">BCAL </parameter>
   <!--Flag to create the TEfficiency for fast tagging library-->
   <parameter name="CreateEfficiencyFile" type="bool"> true </parameter>
   <!--Energy in a Cluster to consider it an electron-->
   <parameter name="ETCluster" type="FloatVec">0.5 0.5  </parameter>
   <!--Energy in a Pad, after subtraction of background required to consider it for signal-->
   <parameter name="ETPad" type="FloatVec"> 0.01 0.3  </parameter>
   <!--The name of the rootFile which will contain the TEfficiency objects-->
   <parameter name="EfficiencyFilename" type="string">TaggingEfficiency.root </parameter>
   <!--Background simulation method-->
   <parameter name="BackgroundMethod" type="string"> Gaussian </parameter>
   <!--Root Inputfile(s)-->
   <parameter name="InputFileBackgrounds" type="StringVec">
     BeamCal_bg_E500-TDR_ws.root
   </parameter>
  <!--Name of the MCParticle Collection-->
  <parameter name="MCParticle Collection Name, only needed and used to estimate efficiencies" type="string" lcioInType="MCParticle">MCParticle </parameter>
  <!--Minimum number of pads in a single tower to be considered for signal-->
  <parameter name="MinimumTowerSize" type="int">6 </parameter>
  <parameter name="LinearCalibrationFactor" type="double"> 60. </parameter>
  <!--Number of Bunch Crossings of Background-->
  <parameter name="NumberOfBX" type="int">1 </parameter>
  <!--Number of Event that should be printed to PDF File-->
  <parameter name="PrintThisEvent" type="int">1 </parameter>
  <!--Name of the Reconstructed Cluster collection-->
  <parameter name="RecoClusterCollectionname" type="string" lcioOutType="Cluster">BCalClusters </parameter>
  <!--Name of the Reconstructed Particle collection-->
  <parameter name="RecoParticleCollectionname" type="string" lcioOutType="ReconstructedParticle">BCalRecoParticle </parameter>
  <!--If not using ConstPadCuts, each pad SigmaCut*variance is considered for clusters-->
  <parameter name="SigmaCut" type="double">2 </parameter>
  <!--Layer (inclusive) from which on we start looking for signal clusters-->
  <parameter name="StartLookingInLayer" type="int">2 </parameter>
  <!--Rings from which onwards the outside Thresholds are used-->
  <parameter name="StartingRing" type="FloatVec">0 1  </parameter>
  <!--Use the cuts for the pads specified in ETPad, if false, the variance in each pad is used times SigmaPad Factor-->
  <parameter name="UseConstPadCuts" type="bool">False </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <parameter name="Verbosity" type="string">WARNING </parameter>
</processor>
<!--################################################ -->

 <processor name="MyComputeShowerShapesProcessor" type="ComputeShowerShapesProcessor">
  <!--Performs Shower profile extraction-->
  <!--Debugging?-->
  <parameter name="Debug" type="int">0 </parameter>
  <!--Name of the PFO collection-->
  <parameter name="PFOCollection" type="string"> PandoraPFOs </parameter>
  <!--Name of the Cluster collection-->
  <parameter name="ClusterCollectionName" type="string"> PandoraClusters </parameter>
  <!-- Radiation Length of Ecal-->
  <parameter name="RadiationLength_Ecal" type="float">3.50 </parameter>
  <!-- Radiation Length of Hcal-->
  <parameter name="RadiationLength_Hcal" type="float">17.57 </parameter>
  <!-- Moliere radius of Ecal-->
  <parameter name="MoliereRadius_Ecal" type="float">9.00 </parameter>
  <!-- Moliere radius of Hcal-->
  <parameter name="MoliereRadius_Hcal" type="float">17.19 </parameter>
  </processor>

<!--################################################ -->
 <processor name="MyLikelihoodPID" type="LikelihoodPIDProcessor">
 <!--Performs particle identification-->
   <!--Debugging?-->
   <parameter name="Debug" type="int">1 </parameter>
   <!--Boundaries for energy binning-->
   <parameter name="EnergyBoundaries" type="FloatVec">0 1.0e+07  </parameter>
   <!--Name of files containing pdfs for charged particles-->
   <parameter name="FilePDFName" type="StringVec"> LikelihoodPID_Histogram_v01.root </parameter>
   <!-- Whether MVA low momentum mu/pi is used or not-->
   <parameter name="UseLowMomentumMuPiSeparation" type="bool">
     true
   </parameter>
   <parameter name="FileWeightFormupiSeparationName" type="StringVec">
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_02GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_03GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_04GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_05GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_06GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_07GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_08GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_09GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_10GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_11GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_12GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_13GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_14GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_15GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_16GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_17GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_18GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_19GeVP_clusterinfo.weights.xml
     ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_20GeVP_clusterinfo.weights.xml
   </parameter>
   
   <!--dE/dx parameters for each particle-->
   <parameter name="dEdxParameter_electron" type="FloatVec">
     -2.40638e-03 7.10337e-01 2.87718e-01 -1.71591e+00 0.0
   </parameter>
   <parameter name="dEdxParameter_muon" type="FloatVec">
     8.11408e-02 9.92207e-01 7.58509e+05 -1.70167e-01 4.63670e-04
   </parameter>
   <parameter name="dEdxParameter_pion" type="FloatVec">
     8.10756e-02 -1.45051e+06 -3.09843e+04 2.84056e-01 3.38131e-04
   </parameter>
   <parameter name="dEdxParameter_kaon" type="FloatVec">
     7.96117e-02 4.13335e+03 1.13577e+06 1.80555e-01 -3.15083e-04
   </parameter>
   <parameter name="dEdxParameter_proton" type="FloatVec">
     7.78772e-02 4.49300e+04 9.13778e+04 1.50088e-01 -6.64184e-04
   </parameter>

   <!--dE/dx normalization-->
   <parameter name="dEdxNormalization" type="float">
     1.350e-7
   </parameter>

   <!--dE/dx error factor-->
   <parameter name="dEdxErrorFactor" type="float">
     7.55
   </parameter>

   <!-- Method: Maximum Likelihood(0) or Bayesian(1)-->
   <parameter name="UseBayesian" type="int">
     0
   </parameter>

   <!--Name of the PFO collection-->
   <parameter name="RecoParticleCollection" type="string">PandoraPFOs</parameter>
 </processor>

<!--################################################ -->
 <processor name="MyTauFinder" type="TaJetClustering">
 <!--Performs tau jet finding -->
   <!--  0. Collections -->
   <!--Input PFO collection-->
   <parameter name="PFOCollection" type="string" lcioInType="ReconstructedParticle">PandoraPFOs </parameter>
   <!--Tau output collection-->
   <parameter name="OutputTauCollection" type="string" lcioOutType="ReconstructedParticle">TaJets </parameter>
   <!--Remained PFO collection not clustered-->
   <parameter name="RemainPFOCollection" type="string" lcioOutType="ReconstructedParticle">TaJetsRemainPFOs </parameter>
   <!--  1. Clustering -->
   <!--Tau mass for tau clustering [GeV]-->
   <parameter name="TauMass" type="double">2 </parameter>
   <!--Allowed cosine angle to be clustered-->
   <parameter name="TauCosAngle" type="double">0.98 </parameter>
   <!--  2. Primary cut -->
   <!-- Skip ANY Primary and Cone cuts if true: should be only used in lepton-only final states! -->
   <parameter name="NoSelection" type="int">0 </parameter>

   <!--Primary cut include IMPLICIT selection of accepting only 1 or 3 tracks in jets:
              this loosen the counting of low energy tracks-->
   <parameter name="AcceptFlexibleLowEnergyTrack" type="int">1 </parameter>
   <!--Minimum jet energy to be accepted as taus-->
   <parameter name="MinimumJetEnergy" type="double">3 </parameter>
   <!--Minimum track energy to be accepted as taus-->
   <parameter name="MinimumTrackEnergy" type="double">2 </parameter>
   <!--Minimum track energy to be counted-->
   <parameter name="MinimumTrackEnergyAssoc" type="double">2 </parameter>
   <!--  3. Cone cut: currently simple 1D cut -->
   <!-- No cone selection if true -->
   <parameter name="NoSelection" type="int">0 </parameter>

   <!--Minimum cosine angle for cone-->
   <parameter name="ConeMinCosAngle" type="double">0.9 </parameter>
   <!--Maximum cosine angle for cone-->
   <parameter name="ConeMaxCosAngle" type="double">1 </parameter>
   <!--Energy fraction of cone compared to central-->
   <parameter name="ConeMaxEnergyFrac" type="double">0.1 </parameter>
 </processor>


<!--################################################ -->



 <processor name="MyRecoMCTruthLinker" type="RecoMCTruthLinker">
 <!--links RecontructedParticles to the MCParticle based on number of hits used-->
   
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> WARNING0  </parameter> 
   
   <!--  Input collections: mcparticles, pfos, clusters and tracks 
         PFOs already connect to tracks and clusters, so what we do in this processor is to connect
         tracks and clusters to mcparticles ... 
         The values given here are the defaults, so they don't really need to be
         specified -->
   <parameter name="MCParticleCollection" type="string" lcioInType="MCParticle"> MCParticle </parameter>
   <!--Name of the ReconstructedParticles input collection-->
   <parameter name="RecoParticleCollection" type="string" lcioInType="ReconstructedParticle"> PandoraPFOs </parameter>
   <!--Name of the Cluster collection -->
   <parameter name="ClusterCollection" type="string" lcioInType="Cluster"> PandoraClusters </parameter>
   <!--Name of the Tracks input collection-->
   <parameter name="TrackCollection" type="string" lcioInType="Track">MarlinTrkTracks </parameter>
  
   <!-- Don't change any of these hit related collections if you're not very sure you know what you are doing.
        In any case, the ones listed here are the defaults, so they can be removed from
        this steering -->
   <!--  Simulated tracker hits (has the conection to MCParticles -->
   <parameter name="SimTrackerHitCollections" type="StringVec" lcioInType="SimTrackerHit">
     VXDCollection 
     SITCollection 
     FTD_PIXELCollection 
     FTD_STRIPCollection 
     TPCCollection 
     SETCollection  
   </parameter>
   <!--  Connections from tracker hits (connected to tracks) to sim tracker hits (connects to MC particle) -->
   <parameter name="TrackerHitsRelInputCollections" type="StringVec" lcioInType="LCRelation">
     VXDTrackerHitRelations 
     SITSpacePointRelations 
     FTDPixelTrackerHitRelations 
     FTDSpacePointRelations 
     TPCTrackerHitRelations 
     SETSpacePointRelations  
   </parameter>
   <!-- same for the calos: Simulated calo hits (has the connection to MCParticles) -->
   <parameter name="SimCaloHitCollections" type="StringVec" lcioInType="SimCalorimeterHit">
     BeamCalCollection
     EcalBarrelSiliconCollection
     EcalBarrelSiliconPreShowerCollection
     EcalEndcapRingCollection
     EcalEndcapRingPreShowerCollection
     EcalEndcapSiliconCollection
     EcalEndcapSiliconPreShowerCollection
     HcalBarrelRegCollection
     HcalEndCapRingsCollection
     HcalEndCapsCollection
     LHcalCollection
     LumiCalCollection
     MuonBarrelCollection
     MuonEndCapCollection
   </parameter> 
   <!-- Connections from calo hist (connected to clusters) tp sim calo hits  (connects to MC particle) -->
   <parameter name="SimCalorimeterHitRelationNames" type="StringVec" lcioInType="LCRelation">
     RelationCaloHit
     RelationLHcalHit
     RelationMuonHit
     RelationLcalHit
     RelationBCalHit
   </parameter> 
   
   <!--PDG codes of particles of which the daughters will be kept in the skimmmed MCParticle collection-->
   <parameter name="KeepDaughtersPDG" type="IntVec"> 22 111 310 13 211 321</parameter>
   
   <!--Names of the output collections -->
   <!--Name of the skimmed MCParticle  output collection-->
   <parameter name="MCParticlesSkimmedName" type="string" lcioOutType="MCParticle"> MCParticlesSkimmed </parameter>
   
   <!-- links between tracks or clusters and mcparticles. The two sets differ
        in what the weight means. These four will only be output if the
        name is given here in the steering -->
   <parameter name="MCTruthTrackLinkName" type="string" lcioOutType="LCRelation"> MCTruthMarlinTrkTracksLink </parameter>  
   <parameter name="TrackMCTruthLinkName" type="string" lcioOutType="LCRelation"> MarlinTrkTracksMCTruthLink </parameter>
   <parameter name="MCTruthClusterLinkName" type="string" lcioOutType="LCRelation"> MCTruthClusterLink </parameter>
   <parameter name="ClusterMCTruthLinkName" type="string" lcioOutType="LCRelation"> ClusterMCTruthLink </parameter>


   <!-- Links PFO <-> MCParticles. Only RecoMCTruthLink is output by default,
        to also get the reverse link, MCTruthRecoLinkName must be given here -->
   <parameter name="RecoMCTruthLinkName" type="string" lcioOutType="LCRelation"> RecoMCTruthLink </parameter>
   <parameter name="MCTruthRecoLinkName" type="string" lcioOutType="LCRelation"> MCTruthRecoLink </parameter>
   <!-- set to true to get the weights in RecoMCTruthLink to include both weights to
        tracks and clusters. False implies that only the true particle that
        gives most contributions to the track of the PFO (charged PFOs), or
        to the cluster (neutral ones) is linked to the PFO -->
   <parameter name="FullRecoRelation" type="bool"> true </parameter>
   
   <!-- further options -->
   <!--true: use relations for TrackerHits, false : use getRawHits -->
   <parameter name="UseTrackerHitRelations" type="bool"> true </parameter>
   <!--If Using Particle Gun Ignore Gen Stat-->
   <parameter name="UsingParticleGun" type="bool"> false </parameter>
 </processor>


<!--################################################ -->
  <processor name="VertexFinder" type="LcfiplusProcessor">

    <!-- run primary and secondary vertex finders -->
    <parameter name="Algorithms" type="stringVec"> PrimaryVertexFinder BuildUpVertex </parameter>
    <parameter name="ReadSubdetectorEnergies" type="int" value="1"/> <!-- true for ILD -->
    <parameter name="UpdateVertexRPDaughters" type="int" value="1"/> <!-- false for non-updative PandoraPFOs -->
    <parameter name="TrackHitOrdering" type="int" value="1"/> <!-- Track hit ordering: 0=ILD-LOI,SID-DBD, 1=ILD-DBD -->
    <parameter name="PrintEventNumber" type="int" value="0"/> <!-- 0 for not printing event number, n for printing every n events -->

    <!-- specify input collection names -->
    <parameter name="PFOCollection" type="string" value="PandoraPFOs" />
    <parameter name="PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
    <parameter name="BuildUpVertexCollectionName" type="string" value="BuildUpVertex" />
    <parameter name="BuildUpVertex.V0VertexCollectionName" type="string" value="BuildUpVertex_V0" />

    <!-- parameters for primary vertex finder -->
    <parameter name="PrimaryVertexFinder.TrackMaxD0" type="double" value="20." />
    <parameter name="PrimaryVertexFinder.TrackMaxZ0" type="double" value="20." />
    <parameter name="PrimaryVertexFinder.TrackMinVtxFtdHits" type="int" value="1" />
    <parameter name="PrimaryVertexFinder.Chi2Threshold" type="double" value="25." />

    <!-- parameters for secondary vertex finder -->
    <parameter name="BuildUpVertex.TrackMaxD0" type="double" value="10." />
    <parameter name="BuildUpVertex.TrackMaxZ0" type="double" value="20." />
    <parameter name="BuildUpVertex.TrackMinPt" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMaxD0Err" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMaxZ0Err" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMinTpcHits" type="int" value="10000" />
    <parameter name="BuildUpVertex.TrackMinFtdHits" type="int" value="10000" />
    <parameter name="BuildUpVertex.TrackMinVxdHits" type="int" value="10000" />
    <parameter name="BuildUpVertex.TrackMinVxdFtdHits" type="int" value="0" />
    <parameter name="BuildUpVertex.PrimaryChi2Threshold" type="double" value="25." />
    <parameter name="BuildUpVertex.SecondaryChi2Threshold" type="double" value="9." />
    <parameter name="BuildUpVertex.MassThreshold" type="double" value="10." />
    <parameter name="BuildUpVertex.MinDistFromIP" type="double" value="0.3" />
    <parameter name="BuildUpVertex.MaxChi2ForDistOrder" type="double" value="1.0" />
    <parameter name="BuildUpVertex.AssocIPTracks" type="int" value="1" />
    <parameter name="BuildUpVertex.AssocIPTracksMinDist" type="double" value="0." />
    <parameter name="BuildUpVertex.AssocIPTracksChi2RatioSecToPri" type="double" value="2.0" />
    <parameter name="BuildUpVertex.UseV0Selection" type="int" value="1" />

  </processor>
  
 <processor name="MyPi0Finder" type="GammaGammaCandidateFinder">
    <parameter name="InputParticleCollectionName" value="PandoraPFOs" />
    <parameter name="GammaGammaResonanceName" value="Pi0" />
    <parameter name="GammaGammaResonanceMass" value="0.1349766" />
    <parameter name="MaxDeltaMgg" value="0.04" />
    <parameter name="GammaMomentumCut" value="0.5" />
    <parameter name="Printing" value="0" />
    <parameter name="OutputParticleCollectionName" value="GammaGammaCandidatePi0s" />
 </processor>

 <processor name="MyEtaFinder" type="GammaGammaCandidateFinder">
    <parameter name="InputParticleCollectionName" value="PandoraPFOs" />
    <parameter name="GammaGammaResonanceName" value="Eta" />
    <parameter name="GammaGammaResonanceMass" value="0.547862" />
    <parameter name="MaxDeltaMgg" value="0.14" />
    <parameter name="GammaMomentumCut" value="1.0" />
    <parameter name="Printing" value="0" />
    <parameter name="OutputParticleCollectionName" value="GammaGammaCandidateEtas" />
 </processor>

 <processor name="MyEtaPrimeFinder" type="GammaGammaCandidateFinder">
    <parameter name="InputParticleCollectionName" value="PandoraPFOs" />
    <parameter name="GammaGammaResonanceName" value="EtaPrime" />
    <parameter name="GammaGammaResonanceMass" value="0.95778" />
    <parameter name="MaxDeltaMgg" value="0.19" />
    <parameter name="GammaMomentumCut" value="2.0" />
    <parameter name="Printing" value="0" />
    <parameter name="OutputParticleCollectionName" value="GammaGammaCandidateEtaPrimes" />
 </processor>
 
 <processor name="MyGammaGammaSolutionFinder" type="GammaGammaSolutionFinder">
    <parameter name="InputParticleCollectionName1" value="GammaGammaCandidatePi0s" />
    <parameter name="InputParticleCollectionName2" value="GammaGammaCandidateEtas" />
    <parameter name="InputParticleCollectionName3" value="GammaGammaCandidateEtaPrimes" />
    <parameter name="Printing" value="0" />
    <parameter name="OutputParticleCollectionName" value="GammaGammaParticles" />
 </processor>

 <processor name="MyDistilledPFOCreator" type="DistilledPFOCreator">
    <parameter name="InputParticleCollectionName1" value="PandoraPFOsWithoutIsoLep" />
    <parameter name="InputParticleCollectionName2" value="GammaGammaParticles" />
    <parameter name="Printing" value="0" />
    <parameter name="OutputParticleCollectionName" value="DistilledPFOs" />
 </processor>
 
</marlin>
